<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>webpack打包nodejs服务</title>
      <link href="/blog/2024/12/29/webpack%E6%89%93%E5%8C%85nodejs%E6%9C%8D%E5%8A%A1/"/>
      <url>/blog/2024/12/29/webpack%E6%89%93%E5%8C%85nodejs%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h3 id="安装webpack"><a href="#安装webpack" class="headerlink" title="安装webpack"></a>安装webpack</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli --save-dev</span><br><span class="line">npm install webpack-node-externals --save-dev</span><br></pre></td></tr></table></figure><h3 id="配置webpack-config-js"><a href="#配置webpack-config-js" class="headerlink" title="配置webpack.config.js"></a>配置webpack.config.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> nodeExternals = <span class="built_in">require</span>(<span class="string">&#x27;webpack-node-externals&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">target</span>: <span class="string">&#x27;node&#x27;</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./app.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;server.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">externals</span>: [<span class="title function_">nodeExternals</span>()],</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure><h3 id="配置webpack打包命令"><a href="#配置webpack打包命令" class="headerlink" title="配置webpack打包命令"></a>配置webpack打包命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --config webpack.config.js&quot;</span></span><br></pre></td></tr></table></figure><h3 id="打包服务"><a href="#打包服务" class="headerlink" title="打包服务"></a>打包服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><h3 id="运行打包后的服务"><a href="#运行打包后的服务" class="headerlink" title="运行打包后的服务"></a>运行打包后的服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node dist/server.js</span><br><span class="line"><span class="comment"># 在命令行中运行node dist/server.js即可启动打包后的服务。</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodejs打包成桌面程序exe</title>
      <link href="/blog/2024/12/29/nodejs%E6%89%93%E5%8C%85%E6%88%90%E6%A1%8C%E9%9D%A2%E7%A8%8B%E5%BA%8Fexe/"/>
      <url>/blog/2024/12/29/nodejs%E6%89%93%E5%8C%85%E6%88%90%E6%A1%8C%E9%9D%A2%E7%A8%8B%E5%BA%8Fexe/</url>
      
        <content type="html"><![CDATA[<h3 id="安装pkg"><a href="#安装pkg" class="headerlink" title="安装pkg"></a>安装pkg</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev pkg</span><br></pre></td></tr></table></figure><h3 id="创建nodejs服务"><a href="#创建nodejs服务" class="headerlink" title="创建nodejs服务"></a>创建nodejs服务</h3><p>此处默认已经有了nodejs服务，入口文件是app.js</p><h3 id="配置pkg"><a href="#配置pkg" class="headerlink" title="配置pkg"></a>配置pkg</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;app-name&quot;</span><span class="punctuation">,</span>  </span><br><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nodemon app.js&quot;</span><span class="punctuation">,</span>   <span class="comment">// 开发环境运行</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg . --out-path dist&quot;</span><span class="punctuation">,</span>  <span class="comment">// 打包所有平台</span></span><br><span class="line">    <span class="attr">&quot;build:win&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg . --targets node16-win-x64 --out-path dist&quot;</span><span class="punctuation">,</span>  <span class="comment">// 打包windows应用程序</span></span><br><span class="line">    <span class="attr">&quot;build:linux&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg . --targets node16-linux-x64 --out-path dist&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build:mac&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pkg . --targets node16-macos-x64 --out-path dist&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pkg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.8.1&quot;</span>  <span class="comment">// 依赖包</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;pkg&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// # 脚本文件</span></span><br><span class="line">    <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;controller/**/*.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;middleware/**/*.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;model/**/*.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;routes/**/*.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;config/**/*.js&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="comment">// #静态文件</span></span><br><span class="line">    <span class="attr">&quot;assets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;public/**/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;uploads/**/*&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="comment">// #输出目标</span></span><br><span class="line">    <span class="attr">&quot;targets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;node16-win-x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;node16-linux-x64&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;node16-macos-x64&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="comment">// #输出路径</span></span><br><span class="line">    <span class="attr">&quot;outputPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dist&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="打包运行"><a href="#打包运行" class="headerlink" title="打包运行"></a>打包运行</h3><p>使用命令直接运行 <code>npm run build:win</code>等待打包完成，完成后会创建dist目录，并且出现一个<code>app-name.exe</code>文件，就是已经打包完成了</p>]]></content>
      
      
      
        <tags>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jeecgboot一键启动脚本</title>
      <link href="/blog/2024/12/18/jeecgboot%E4%B8%80%E9%94%AE%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC/"/>
      <url>/blog/2024/12/18/jeecgboot%E4%B8%80%E9%94%AE%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<h2 id="一键启动jeecgboot脚本"><a href="#一键启动jeecgboot脚本" class="headerlink" title="一键启动jeecgboot脚本"></a>一键启动jeecgboot脚本</h2><blockquote><p>一键将打包好的微服务启动</p></blockquote><ul><li>应用包名称和路径根据自己需求修改<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">setlocal</span><br><span class="line"></span><br><span class="line">:: 应用包名设置</span><br><span class="line"><span class="built_in">set</span> APP_NACOS=Soly-cloud-nacos-3.3.0.jar</span><br><span class="line"><span class="built_in">set</span> APP_GATEWAY=Soly-cloud-gateway-3.3.0.jar</span><br><span class="line"><span class="built_in">set</span> APP_SYSTEM=Soly-cloud-system-start-3.3.0.jar</span><br><span class="line"><span class="built_in">set</span> APP_SCHEDULE=Soly-boot-module-schedule-3.3.0.jar</span><br><span class="line"></span><br><span class="line">:: 日志目录确保存在</span><br><span class="line"><span class="keyword">if</span> not exist <span class="string">&quot;E:\solyboot\services\logs&quot;</span> <span class="built_in">mkdir</span> <span class="string">&quot;E:\solyboot\services\logs&quot;</span></span><br><span class="line"></span><br><span class="line">:: 检查并启动 APP_NACOS</span><br><span class="line">tasklist /FI <span class="string">&quot;IMAGENAME eq java.exe&quot;</span> /FI <span class="string">&quot;WINDOWTITLE eq %APP_NACOS%&quot;</span> | find /I <span class="string">&quot;%APP_NACOS%&quot;</span> &gt;nul</span><br><span class="line"><span class="keyword">if</span> %ERRORLEVEL% neq 0 (</span><br><span class="line">    <span class="built_in">echo</span> %APP_NACOS% is not running. Starting...</span><br><span class="line">    start <span class="string">&quot;nacos&quot;</span> /b java -Dfile.encoding=utf-8 -jar <span class="string">&quot;E:\solyboot\services\%APP_NACOS%&quot;</span> &gt; <span class="string">&quot;E:\solyboot\services\logs\nacos.log&quot;</span> 2&gt;&amp;1</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">echo</span> %APP_NACOS% is already running.</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: 检查并启动 APP_GATEWAY</span><br><span class="line">tasklist /FI <span class="string">&quot;IMAGENAME eq java.exe&quot;</span> /FI <span class="string">&quot;WINDOWTITLE eq %APP_GATEWAY%&quot;</span> | find /I <span class="string">&quot;%APP_GATEWAY%&quot;</span> &gt;nul</span><br><span class="line"><span class="keyword">if</span> %ERRORLEVEL% neq 0 (</span><br><span class="line">    <span class="built_in">echo</span> %APP_GATEWAY% is not running. Starting...</span><br><span class="line">    start <span class="string">&quot;gateway&quot;</span> /b java -Dfile.encoding=utf-8 -jar <span class="string">&quot;E:\solyboot\services\%APP_GATEWAY%&quot;</span> &gt; <span class="string">&quot;E:\solyboot\services\logs\gateway.log&quot;</span> 2&gt;&amp;1</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">echo</span> %APP_GATEWAY% is already running.</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: 检查并启动 APP_SYSTEM</span><br><span class="line">tasklist /FI <span class="string">&quot;IMAGENAME eq java.exe&quot;</span> /FI <span class="string">&quot;WINDOWTITLE eq %APP_SYSTEM%&quot;</span> | find /I <span class="string">&quot;%APP_SYSTEM%&quot;</span> &gt;nul</span><br><span class="line"><span class="keyword">if</span> %ERRORLEVEL% neq 0 (</span><br><span class="line">    <span class="built_in">echo</span> %APP_SYSTEM% is not running. Starting...</span><br><span class="line">    start <span class="string">&quot;system&quot;</span> /b java -Dfile.encoding=utf-8 -jar <span class="string">&quot;E:\solyboot\services\%APP_SYSTEM%&quot;</span> &gt; <span class="string">&quot;E:\solyboot\services\logs\systemstart.log&quot;</span> 2&gt;&amp;1</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">echo</span> %APP_SYSTEM% is already running.</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: 检查并启动 APP_XXLJOB</span><br><span class="line">tasklist /FI <span class="string">&quot;IMAGENAME eq java.exe&quot;</span> /FI <span class="string">&quot;WINDOWTITLE eq %APP_XXLJOB%&quot;</span> | find /I <span class="string">&quot;%APP_XXLJOB%&quot;</span> &gt;nul</span><br><span class="line"><span class="keyword">if</span> %ERRORLEVEL% neq 0 (</span><br><span class="line">    <span class="built_in">echo</span> %APP_XXLJOB% is not running. Starting...</span><br><span class="line">    start <span class="string">&quot;xxljob&quot;</span> /b java -Dfile.encoding=utf-8 -jar <span class="string">&quot;E:\solyboot\services\%APP_XXLJOB%&quot;</span> &gt; <span class="string">&quot;E:\solyboot\services\logs\xxljobstart.log&quot;</span> 2&gt;&amp;1</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">echo</span> %APP_XXLJOB% is already running.</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: 检查并启动 APP_SCHEDULE</span><br><span class="line">tasklist /FI <span class="string">&quot;IMAGENAME eq java.exe&quot;</span> /FI <span class="string">&quot;WINDOWTITLE eq %APP_SCHEDULE%&quot;</span> | find /I <span class="string">&quot;%APP_SCHEDULE%&quot;</span> &gt;nul</span><br><span class="line"><span class="keyword">if</span> %ERRORLEVEL% neq 0 (</span><br><span class="line">    <span class="built_in">echo</span> %APP_SCHEDULE% is not running. Starting...</span><br><span class="line">    start <span class="string">&quot;schedule&quot;</span> /b java -Dfile.encoding=utf-8 -jar <span class="string">&quot;E:\solyboot\services\%APP_SCHEDULE%&quot;</span> &gt; <span class="string">&quot;E:\solyboot\services\logs\schedulestart.log&quot;</span> 2&gt;&amp;1</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">echo</span> %APP_SCHEDULE% is already running.</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> All services have been checked and started as needed.</span><br><span class="line">endlocal</span><br></pre></td></tr></table></figure></li></ul><h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><ul><li>可基于上述脚本创建一个vbs文件，实现无窗口启动 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> Set WshShell = CreateObject(<span class="string">&quot;WScript.Shell&quot;</span>) </span><br><span class="line">WshShell.Run chr(34) &amp; <span class="string">&quot;E:\solyboot\services\solyboot-start.bat&quot;</span> &amp; Chr(34), 0, False</span><br><span class="line">Set WshShell = Nothing</span><br></pre></td></tr></table></figure></li><li>一键停止服务脚本, 查询所有的java进程，然后终止 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> @<span class="built_in">echo</span> off</span><br><span class="line">setlocal</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 正在关闭所有 Java 进程...</span><br><span class="line"></span><br><span class="line">:: 获取所有 java.exe 进程的进程ID并逐个终止</span><br><span class="line"><span class="keyword">for</span> /f <span class="string">&quot;tokens=2&quot;</span> %%P <span class="keyword">in</span> (<span class="string">&#x27;tasklist /FI &quot;IMAGENAME eq java.exe&quot;&#x27;</span>) <span class="keyword">do</span> (</span><br><span class="line">    <span class="built_in">echo</span> 正在终止 java.exe 进程 ID %%P ...</span><br><span class="line">    taskkill /PID %%P /F</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 所有 Java 进程已终止。</span><br><span class="line">endlocal</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li>通过windows任务计划，定时启动，开机启动</li><li>数据库备份脚本，通过定时任务实现2天备份一次 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"> @<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">set</span> BACKUP_PATH=E:\mysql\Backups</span><br><span class="line"><span class="built_in">set</span> MYSQL_USER=soly</span><br><span class="line"><span class="built_in">set</span> MYSQL_PASSWORD=soly7710888</span><br><span class="line"><span class="built_in">set</span> DATABASE_NAME=xas_solyboot</span><br><span class="line"><span class="built_in">set</span> DATESTAMP=%DATE:~0,4%%DATE:~5,2%%DATE:~8,2%</span><br><span class="line"><span class="built_in">set</span> YEAR=%DATE:~0,4%</span><br><span class="line"><span class="built_in">set</span> MONTH=%DATE:~5,2%</span><br><span class="line"><span class="built_in">set</span> BACKUP_DIR=%BACKUP_PATH%\%YEAR%-%MONTH%</span><br><span class="line"><span class="built_in">set</span> BACKUP_FILE=%BACKUP_DIR%\%DATESTAMP%backup.sql</span><br><span class="line"><span class="built_in">set</span> LOG_FILE=%BACKUP_PATH%\backup_log.txt</span><br><span class="line"></span><br><span class="line">:: 创建备份目录（如果不存在）</span><br><span class="line"><span class="keyword">if</span> not exist <span class="string">&quot;%BACKUP_PATH%&quot;</span> (</span><br><span class="line">    <span class="built_in">mkdir</span> <span class="string">&quot;%BACKUP_PATH%&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> Created backup directory: %BACKUP_PATH% &gt;&gt; <span class="string">&quot;%LOG_FILE%&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> Created backup directory: %BACKUP_PATH%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: 创建月份备份目录（如果不存在）</span><br><span class="line"><span class="keyword">if</span> not exist <span class="string">&quot;%BACKUP_DIR%&quot;</span> (</span><br><span class="line">    <span class="built_in">mkdir</span> <span class="string">&quot;%BACKUP_DIR%&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> Created monthly backup directory: %BACKUP_DIR% &gt;&gt; <span class="string">&quot;%LOG_FILE%&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> Created monthly backup directory: %BACKUP_DIR%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: 记录开始备份的时间</span><br><span class="line"><span class="built_in">echo</span> Starting backup at %DATE% %TIME% &gt;&gt; <span class="string">&quot;%LOG_FILE%&quot;</span></span><br><span class="line"><span class="built_in">echo</span> Starting backup at %DATE% %TIME%</span><br><span class="line"></span><br><span class="line">:: 执行备份</span><br><span class="line"><span class="built_in">echo</span> Running mysqldump <span class="built_in">command</span>: <span class="string">&quot;C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqldump.exe&quot;</span> -u %MYSQL_USER% -p%MYSQL_PASSWORD% %DATABASE_NAME% &gt; <span class="string">&quot;%BACKUP_FILE%&quot;</span> 2&gt;&gt; <span class="string">&quot;%LOG_FILE%&quot;</span></span><br><span class="line"><span class="string">&quot;C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqldump.exe&quot;</span> -u %MYSQL_USER% -p%MYSQL_PASSWORD% %DATABASE_NAME% &gt; <span class="string">&quot;%BACKUP_FILE%&quot;</span> 2&gt;&gt; <span class="string">&quot;%LOG_FILE%&quot;</span></span><br><span class="line"></span><br><span class="line">:: 检查备份是否成功</span><br><span class="line"><span class="keyword">if</span> %errorlevel% neq 0 (</span><br><span class="line">    <span class="built_in">echo</span> Backup failed with error code %errorlevel%! &gt;&gt; <span class="string">&quot;%LOG_FILE%&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> Backup failed with error code %errorlevel%!</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">echo</span> Backup successful: %BACKUP_FILE% &gt;&gt; <span class="string">&quot;%LOG_FILE%&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> Backup successful: %BACKUP_FILE%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: 可选：删除旧的备份文件</span><br><span class="line">:: forfiles /p <span class="string">&quot;%BACKUP_PATH%&quot;</span> /m *.sql /d -7 /c <span class="string">&quot;cmd /c del @path&quot;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 脚本 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>node+FFmpeg解析视频</title>
      <link href="/blog/2024/12/18/node-FFmpeg%E8%A7%A3%E6%9E%90%E8%A7%86%E9%A2%91/"/>
      <url>/blog/2024/12/18/node-FFmpeg%E8%A7%A3%E6%9E%90%E8%A7%86%E9%A2%91/</url>
      
        <content type="html"><![CDATA[<h2 id="FFmpeg简介"><a href="#FFmpeg简介" class="headerlink" title="FFmpeg简介"></a>FFmpeg简介</h2><p>FFmpeg 是一个开源的多媒体框架，它能够对视频和音频进行录制、转换以及流处理。它支持大量的视频和音频格式，包括编解码器、解码器、复用器、解复用器、过滤器以及更多的组件。FFmpeg 的强大之处在于它的多功能性和高性能，它被广泛应用于视频转码、视频流处理、视频剪辑、添加水印等领域。</p><p>FFmpeg 提供了一系列的命令行工具，如 ffmpeg、ffplay、ffprobe 等，这些工具可以用来处理多媒体文件。在 Node.js 中使用 FFmpeg，通常是通过调用命令行工具实现的，但这也可以通过一些 Node.js 的第三方库来简化，例如 fluent-ffmpeg。下面我们将介绍如何在 Node.js 中集成 FFmpeg，并展示一些基本的视频处理示例。</p><h2 id="安装FFmpeg"><a href="#安装FFmpeg" class="headerlink" title="安装FFmpeg"></a>安装FFmpeg</h2><p>首先，确保你的系统上安装了 FFmpeg。你可以从 FFmpeg 的官方网站下载预编译的二进制文件，或者从源代码编译。确保 FFmpeg 的可执行文件位于系统的 PATH 中，这样 Node.js 脚本就可以调用它。</p><h3 id="安装教程"><a href="#安装教程" class="headerlink" title="安装教程"></a>安装教程</h3><ul><li>打开 <a href="https://ffmpeg.org/download.html">Download FFmpeg官网</a>，选择安装包windows builds from gyan.dev<br>  <img src="/blog/./node-FFmpeg%E8%A7%A3%E6%9E%90%E8%A7%86%E9%A2%91/image.png" alt="alt text"></li><li>下载对应版本的安装包，例如：ffmpeg-6.0-full_build-shared.zip<br>  <img src="/blog/./node-FFmpeg%E8%A7%A3%E6%9E%90%E8%A7%86%E9%A2%91/image1.png" alt="alt text"></li><li>下载完成后，解压安装包</li><li>将解压后的文件夹添加到环境变量中，例如：C:\Program Files\ffmpeg-6.0-full_build-shared</li><li>验证是否安装成功，在命令行中输入ffmpeg，如果出现版本信息，则安装成功。</li></ul><h2 id="使用-fullt-ffmpeg-库"><a href="#使用-fullt-ffmpeg-库" class="headerlink" title="使用 fullt-ffmpeg 库"></a>使用 fullt-ffmpeg 库</h2><p>fluent-ffmpeg 是一个 Node.js 库，它提供了一个流式接口来控制 FFmpeg。这使得构建复杂的 FFmpeg 命令变得更加容易。</p><p>首先，你需要安装 fluent-ffmpeg：<code>npm install fluent-ffmpeg</code></p><p>然后，你可以使用以下代码来转码视频：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">WebSocket</span> = <span class="built_in">require</span>(<span class="string">&#x27;ws&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> ffmpeg = <span class="built_in">require</span>(<span class="string">&#x27;fluent-ffmpeg&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ffmpegStream = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> ffmpegCommandInstance = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>();</span><br><span class="line"><span class="keyword">const</span> wss = <span class="keyword">new</span> <span class="title class_">WebSocket</span>.<span class="title class_">Server</span>(&#123; <span class="attr">noServer</span>: <span class="literal">true</span> &#125;);</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">on</span>(<span class="string">&#x27;upgrade&#x27;</span>, <span class="keyword">function</span> <span class="title function_">upgrade</span>(<span class="params">request, socket, head</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> parsedUrl = url.<span class="title function_">parse</span>(request.<span class="property">url</span>, <span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">const</span> query = parsedUrl.<span class="property">query</span>; <span class="comment">// 这里是查询参数对象</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Received query parameters:&#x27;</span>, query);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 检查 rtsp 参数是否传递并有效</span></span><br><span class="line">  <span class="keyword">let</span> rtspUrl = query &amp;&amp; query.<span class="property">rtsp</span> ? <span class="built_in">decodeURIComponent</span>(query.<span class="property">rtsp</span>) : <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!rtspUrl || rtspUrl.<span class="title function_">trim</span>() === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;RTSP URL not provided or invalid.&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 向客户端发送错误信息并关闭连接</span></span><br><span class="line">    socket.<span class="title function_">write</span>(<span class="string">&#x27;HTTP/1.1 400 Bad Request\r\n\r\n&#123;&quot;error&quot;: &quot;RTSP URL is required&quot;&#125;&#x27;</span>);</span><br><span class="line">    socket.<span class="title function_">destroy</span>();</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 接受 WebSocket 升级请求</span></span><br><span class="line">  wss.<span class="title function_">handleUpgrade</span>(request, socket, head, <span class="keyword">function</span> <span class="title function_">done</span>(<span class="params">ws</span>) &#123;</span><br><span class="line">    wss.<span class="title function_">emit</span>(<span class="string">&#x27;connection&#x27;</span>, ws, request);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">wss.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, <span class="function">(<span class="params">ws, req</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Client connected with query:&#x27;</span>, url.<span class="title function_">parse</span>(req.<span class="property">url</span>, <span class="literal">true</span>).<span class="property">query</span>.<span class="property">rtsp</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> rtspUrl = url.<span class="title function_">parse</span>(req.<span class="property">url</span>, <span class="literal">true</span>).<span class="property">query</span>.<span class="property">rtsp</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果没有传递 rtspUrl 参数，则关闭连接,返回消息</span></span><br><span class="line">  <span class="keyword">if</span> (!rtspUrl || rtspUrl.<span class="title function_">trim</span>() === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">    ws.<span class="title function_">send</span>(<span class="string">&#x27;未传递 rtspUrl 参数，已关闭连接&#x27;</span>);</span><br><span class="line">    ws.<span class="title function_">close</span>();</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果还没有FFmpeg流，则启动它</span></span><br><span class="line">  <span class="keyword">if</span> (!ffmpegStream) &#123;</span><br><span class="line">    ffmpegCommandInstance = <span class="title function_">ffmpeg</span>(rtspUrl)</span><br><span class="line">      .<span class="title function_">addInputOption</span>(<span class="string">&#x27;-rtsp_transport&#x27;</span>, <span class="string">&#x27;tcp&#x27;</span>) <span class="comment">// 使用 TCP 传输 RTSP</span></span><br><span class="line">      .<span class="title function_">addInputOption</span>(<span class="string">&#x27;-fflags&#x27;</span>, <span class="string">&#x27;nobuffer&#x27;</span>)   <span class="comment">// 尽量降低缓冲</span></span><br><span class="line">      .<span class="title function_">addInputOption</span>(<span class="string">&#x27;-analyzeduration&#x27;</span>, <span class="string">&#x27;0&#x27;</span>) <span class="comment">// 减少分析时间</span></span><br><span class="line">      .<span class="title function_">addInputOption</span>(<span class="string">&#x27;-probesize&#x27;</span>, <span class="string">&#x27;32&#x27;</span>)</span><br><span class="line">      .<span class="title function_">videoCodec</span>(<span class="string">&#x27;libx264&#x27;</span>)                   <span class="comment">// 转码为 H.264</span></span><br><span class="line">      .<span class="title function_">outputOptions</span>(<span class="string">&#x27;-preset&#x27;</span>, <span class="string">&#x27;ultrafast&#x27;</span>)   <span class="comment">// 快速编码模式</span></span><br><span class="line">      .<span class="title function_">outputOptions</span>(<span class="string">&#x27;-tune&#x27;</span>, <span class="string">&#x27;zerolatency&#x27;</span>)   <span class="comment">// 实时优化</span></span><br><span class="line">      .<span class="title function_">outputOptions</span>(<span class="string">&#x27;-g&#x27;</span>, <span class="string">&#x27;25&#x27;</span>)               <span class="comment">// 关键帧间隔（GOP）</span></span><br><span class="line">      .<span class="title function_">outputOptions</span>(<span class="string">&#x27;-f&#x27;</span>, <span class="string">&#x27;flv&#x27;</span>)              <span class="comment">// 输出 FLV 格式</span></span><br><span class="line">      .<span class="title function_">noAudio</span>()                               <span class="comment">// 不需要音频</span></span><br><span class="line">      .<span class="title function_">on</span>(<span class="string">&#x27;start&#x27;</span>, <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;FFmpeg started&#x27;</span>))</span><br><span class="line">      .<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;FFmpeg error:&#x27;</span>, err.<span class="property">message</span>);</span><br><span class="line">        ws.<span class="title function_">close</span>();</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;FFmpeg process ended&#x27;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    ffmpegStream = ffmpegCommandInstance.<span class="title function_">pipe</span>();</span><br><span class="line"></span><br><span class="line">    ffmpegStream.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">chunk</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 广播数据给所有已连接的客户端</span></span><br><span class="line">      wss.<span class="property">clients</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">client</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (client.<span class="property">readyState</span> === <span class="title class_">WebSocket</span>.<span class="property">OPEN</span>) &#123;</span><br><span class="line">          client.<span class="title function_">send</span>(chunk);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 客户端断开时的处理</span></span><br><span class="line">  ws.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 当最后一个客户端断开时，结束 FFmpeg 进程</span></span><br><span class="line">    <span class="keyword">if</span> (wss.<span class="property">clients</span>.<span class="property">size</span> === <span class="number">0</span> &amp;&amp; ffmpegCommandInstance) &#123;</span><br><span class="line">      ffmpegCommandInstance.<span class="title function_">kill</span>(<span class="string">&#x27;SIGKILL&#x27;</span>);</span><br><span class="line">      ffmpegStream = <span class="literal">null</span>;</span><br><span class="line">      ffmpegCommandInstance = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动 HTTP 服务器并监听端口</span></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;WebSocket server started on ws://localhost:8080&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="前台播放"><a href="#前台播放" class="headerlink" title="前台播放"></a>前台播放</h2><ul><li>安装 flv.js  <code>npm install flv.js</code></li><li>示例<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;video ref=&quot;videoPlayer&quot; class=&quot;video-js vjs-default-skin&quot; controls&gt;&lt;/video&gt;</span><br><span class="line">    &lt;button @click=&quot;startStream&quot;&gt;播放视频&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import flvjs from &quot;flv.js&quot;;</span><br><span class="line"></span><br><span class="line">const videoPlayer = ref(null);</span><br><span class="line">let flvPlayer = null;</span><br><span class="line"></span><br><span class="line">const startStream = () =&gt; &#123;</span><br><span class="line">  if (!flvjs.isSupported()) &#123;</span><br><span class="line">    console.error(&quot;FLV.js is not supported in this browser&quot;);</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 销毁之前的播放器实例</span><br><span class="line">  if (flvPlayer) &#123;</span><br><span class="line">    flvPlayer.unload();</span><br><span class="line">    flvPlayer.detachMediaElement();</span><br><span class="line">    flvPlayer.destroy();</span><br><span class="line">    flvPlayer = null;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 构建带有查询参数的 WebSocket URL</span><br><span class="line">  const params = new URLSearchParams(&#123;</span><br><span class="line">    rtsp: &quot;rtsp:ip@admin:123456&quot;</span><br><span class="line">  &#125;).toString();</span><br><span class="line"></span><br><span class="line">  const wsUrl = `ws://localhost:8080`;</span><br><span class="line"></span><br><span class="line">  // 创建新的 FLV 播放器实例</span><br><span class="line">  flvPlayer = flvjs.createPlayer(&#123;</span><br><span class="line">    type: &quot;flv&quot;,</span><br><span class="line">    url: wsUrl, // WebSocket 地址</span><br><span class="line">    isLive: true,</span><br><span class="line">    hasAudio: false,</span><br><span class="line">    hasVideo: true,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  flvPlayer.attachMediaElement(videoPlayer.value);</span><br><span class="line">  flvPlayer.load();</span><br><span class="line">  flvPlayer.play();</span><br><span class="line">&#125;;</span><br><span class="line">// 监听窗口关闭事件，销毁播放器实例</span><br><span class="line">window.addEventListener(&quot;beforeunload&quot;, () =&gt; &#123;</span><br><span class="line">  if (flvPlayer) &#123;</span><br><span class="line">    flvPlayer.unload();</span><br><span class="line">    flvPlayer.detachMediaElement();</span><br><span class="line">    flvPlayer.destroy();</span><br><span class="line">    flvPlayer = null;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">video &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: auto;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos云服务器开发环境配置</title>
      <link href="/blog/2024/08/01/centos%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
      <url>/blog/2024/08/01/centos%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="centos云服务器开发环境配置"><a href="#centos云服务器开发环境配置" class="headerlink" title="centos云服务器开发环境配置"></a>centos云服务器开发环境配置</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><ul><li>服务器使用的 腾讯云 云服务器</li><li>镜像：centos7.9</li></ul><h2 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h2><ol><li><p><strong>安装EPEL存储库</strong></p><p>Redis软件包通常在EPEL（Extra Packages for Enterprise Linux）存储库中提供。首先，确保你的系统安装了EPEL存储库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br></pre></td></tr></table></figure></li><li><p><strong>安装Redis</strong></p><p>一旦EPEL存储库安装完毕，就可以安装Redis：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">sudo yum install redis</span><br></pre></td></tr></table></figure></li><li><p><strong>启动并启用Redis服务</strong></p><p>安装完成后，启动Redis服务并设置为开机自启：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动redis服务</span></span><br><span class="line">sudo systemctl start redis</span><br><span class="line"><span class="comment"># 停止redis服务</span></span><br><span class="line">sudo systemctl stop redis</span><br><span class="line"><span class="comment"># 重启redis服务</span></span><br><span class="line">sudo systemctl restart redis</span><br><span class="line"><span class="comment"># 设置开机自动启动</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> redis</span><br></pre></td></tr></table></figure></li><li><p><strong>验证Redis是否正在运行</strong></p><p>你可以通过以下命令验证Redis服务是否正常运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status redis</span><br></pre></td></tr></table></figure></li><li><p><strong>配置Redis（可选）</strong></p><p>Redis的配置文件位于<code>/etc/redis.conf</code>。你可以根据需要编辑该文件来调整Redis配置。例如，可以设置绑定地址，调整持久化选项，或者设置内存限制。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑配置</span></span><br><span class="line">sudo vi /etc/redis.conf</span><br><span class="line"><span class="comment">#编辑完成后，重新启动Redis服务使更改生效：</span></span><br><span class="line">sudo systemctl restart redis</span><br></pre></td></tr></table></figure></li></ol><h2 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h2><ol><li><p><strong>安装EPEL存储库</strong></p><p>Nginx通常在EPEL（Extra Packages for Enterprise Linux）存储库中提供。首先，确保你的系统安装了EPEL存储库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br></pre></td></tr></table></figure></li><li><p><strong>安装Nginx</strong></p><p>一旦EPEL存储库安装完毕，就可以安装Nginx：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install nginx</span><br></pre></td></tr></table></figure></li><li><p><strong>启动并启用Nginx服务</strong></p><p>安装完成后，启动Nginx服务并设置为开机自启：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动nginx服务</span></span><br><span class="line">sudo systemctl start nginx</span><br><span class="line"><span class="comment"># 停止nginx服务</span></span><br><span class="line">sudo systemctl stop nginx</span><br><span class="line"><span class="comment"># 重启nginx服务</span></span><br><span class="line">sudo systemctl restart nginx</span><br><span class="line"><span class="comment"># 设置开机自动启动</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure></li><li><p><strong>验证Nginx是否正在运行</strong></p><p>你可以通过以下命令验证Nginx服务是否正常运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status nginx</span><br></pre></td></tr></table></figure></li><li><p><strong>配置防火墙</strong></p><p>如果你的系统启用了防火墙，你需要允许HTTP和HTTPS流量。运行以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=http</span><br><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=https</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure></li><li><p><strong>测试Nginx安装</strong></p><p>打开浏览器并访问你的服务器IP地址。如果Nginx安装成功，你将看到默认的Nginx欢迎页面。</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://your_server_ip</span><br></pre></td></tr></table></figure></li><li><p><strong>打开Nginx主配置文件</strong></p><ol><li><p><strong>基础配置</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局设置</span></span><br><span class="line">user nginx;  <span class="comment"># 指定运行Nginx的用户和用户组</span></span><br><span class="line">worker_processes auto;  <span class="comment"># 指定工作进程的数量，通常设置为CPU核心数量</span></span><br><span class="line">error_log /var/log/nginx/error.log;  <span class="comment"># 指定错误日志文件的位置</span></span><br><span class="line">pid /run/nginx.pid;  <span class="comment"># 指定存储Nginx主进程ID的文件位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 事件模块配置</span></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;  <span class="comment"># 每个工作进程的最大连接数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># HTTP模块配置</span></span><br><span class="line">http &#123;</span><br><span class="line">    include /etc/nginx/mime.types;  <span class="comment"># 指定MIME类型的映射文件</span></span><br><span class="line">    default_type application/octet-stream;  <span class="comment"># 设置默认的MIME类型</span></span><br><span class="line"></span><br><span class="line">    log_format main <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;  <span class="comment"># 定义日志格式</span></span><br><span class="line">    access_log /var/log/nginx/access.log main;  <span class="comment"># 指定访问日志文件的位置和使用的日志格式</span></span><br><span class="line"></span><br><span class="line">    sendfile on;  <span class="comment"># 启用sendfile()系统调用，以提高文件传输性能</span></span><br><span class="line">    tcp_nopush on;  <span class="comment"># 启用TCP_NOPUSH选项，以提高传输效率</span></span><br><span class="line">    tcp_nodelay on;  <span class="comment"># 启用TCP_NODELAY选项，以减少网络延迟</span></span><br><span class="line">    keepalive_timeout 65;  <span class="comment"># 设置keep-alive连接的超时时间</span></span><br><span class="line">    types_hash_max_size 2048;  <span class="comment"># 设置MIME类型的哈希表的最大大小</span></span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;  <span class="comment"># 包含其他配置文件</span></span><br><span class="line">    include /etc/nginx/sites-enabled/*;  <span class="comment"># 包含虚拟主机配置文件</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 服务器块配置</span></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;  <span class="comment"># 指定监听的端口</span></span><br><span class="line">        server_name example.com;  <span class="comment"># 指定服务器名称</span></span><br><span class="line"></span><br><span class="line">        root /usr/share/nginx/html;  <span class="comment"># 指定文档根目录</span></span><br><span class="line">        index index.html index.htm;  <span class="comment"># 指定默认的索引文件</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            try_files <span class="variable">$uri</span> <span class="variable">$uri</span>/ =404;  <span class="comment"># 尝试访问文件或目录，如果不存在则返回404错误</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;  <span class="comment"># 指定404错误页面</span></span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">            internal;  <span class="comment"># 将404.html页面设为内部使用</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;  <span class="comment"># 指定50x错误页面</span></span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            internal;  <span class="comment"># 将50x.html页面设为内部使用</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol><h2 id="安装Java"><a href="#安装Java" class="headerlink" title="安装Java"></a>安装Java</h2><ol><li><p><strong>先查看本地是否自带java环境</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list installed |grep java</span><br></pre></td></tr></table></figure></li><li><p><strong>卸载自带的java（输入su，输入root超级管理员的密码，切换到root用户模式）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove java-1.8.0-openjdk*</span><br><span class="line">yum -y remove tzdata-java*</span><br></pre></td></tr></table></figure></li><li><p><strong>查看yum仓库中的java安装包</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y list java*</span><br></pre></td></tr></table></figure></li><li><p><strong>安装java</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install java-1.8.0-openjdk*</span><br></pre></td></tr></table></figure></li><li><p><strong>配置Java环境变量</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用vi或xftp工具编辑 /etc/profile 文件</span></span><br><span class="line"><span class="comment"># 在最后一行添加</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/java-1.8.0</span><br><span class="line"><span class="built_in">export</span> JRE_HOME=<span class="variable">$JAVA_HOME</span>/jre</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JRE_HOME</span>/bin</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$JRE_HOME</span>/lib</span><br></pre></td></tr></table></figure></li><li><p><strong>重载配置使其生效</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure></li><li><p><strong>检查Java安装和配置情况</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>修改node_modules源码 使用patch-package打补丁</title>
      <link href="/blog/2024/08/01/%E4%BF%AE%E6%94%B9node-modules%E6%BA%90%E7%A0%81-%E4%BD%BF%E7%94%A8patch-package%E6%89%93%E8%A1%A5%E4%B8%81/"/>
      <url>/blog/2024/08/01/%E4%BF%AE%E6%94%B9node-modules%E6%BA%90%E7%A0%81-%E4%BD%BF%E7%94%A8patch-package%E6%89%93%E8%A1%A5%E4%B8%81/</url>
      
        <content type="html"><![CDATA[<h1 id="修改node-modules源码实现xlsx-style行高设置，使用patch-package打补丁"><a href="#修改node-modules源码实现xlsx-style行高设置，使用patch-package打补丁" class="headerlink" title="修改node_modules源码实现xlsx-style行高设置，使用patch-package打补丁"></a>修改node_modules源码实现xlsx-style行高设置，使用patch-package打补丁</h1><blockquote><p> patch-package[<a href="https://www.npmjs.com/package/patch-package]">https://www.npmjs.com/package/patch-package]</a></p><p> 这篇文章主要介绍了Vue中引入使用patch-package为依赖打补丁问题</p></blockquote><ol><li><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install patch-package --save-dev</span><br></pre></td></tr></table></figure></li><li><p>修改脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 package.json 文件中的 scripts 中增加</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;postinstall&quot;</span>: <span class="string">&quot;patch-package&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>修改源码</p><blockquote><p>使用插件xlsx、xlsx-style导出带有样式的表格，两者都可以实现创建excel，但是xlsx免费版仅仅只能做单元格合并，收费版才能设置单元格样式，所以需要用到xlsx-style插件实现表格样式的修改</p></blockquote><ul><li>安装库</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --save xlsx-style //导出excel后表格的样式需要用到这个库</span><br><span class="line">npm install --save xlsx //声明工作簿，创建文件，塞入数据要用到这个库</span><br></pre></td></tr></table></figure><ul><li>设置行高并修改源码</li></ul><p>xlsx-style 库已经无人维护了，默认是没有行高配置的</p><p>如果需要设置行高的话</p><p>需要打开xlsx-style文件中的xlsx.js，找到write_ws_xml_data这个函数，替换成下面的代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 打开xlsx-style文件中的xlsx.js，找到write_ws_xml_data这个函数，替换成下面的代码</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">DEF_PPI</span> = <span class="number">96</span>, <span class="variable constant_">PPI</span> = <span class="variable constant_">DEF_PPI</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">px2pt</span>(<span class="params">px</span>) &#123; <span class="keyword">return</span> px * <span class="number">96</span> / <span class="variable constant_">PPI</span>; &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pt2px</span>(<span class="params">pt</span>) &#123; <span class="keyword">return</span> pt * <span class="variable constant_">PPI</span> / <span class="number">96</span>; &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">write_ws_xml_data</span>(<span class="params">ws, opts, idx, wb</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> o = [], r = [], range = <span class="title function_">safe_decode_range</span>(ws[<span class="string">&#x27;!ref&#x27;</span>]), cell, ref, rr = <span class="string">&quot;&quot;</span>, cols = [], R, C,rows = ws[<span class="string">&#x27;!rows&#x27;</span>];</span><br><span class="line"><span class="keyword">for</span>(C = range.<span class="property">s</span>.<span class="property">c</span>; C &lt;= range.<span class="property">e</span>.<span class="property">c</span>; ++C) cols[C] = <span class="title function_">encode_col</span>(C);</span><br><span class="line"><span class="keyword">for</span>(R = range.<span class="property">s</span>.<span class="property">r</span>; R &lt;= range.<span class="property">e</span>.<span class="property">r</span>; ++R) &#123;</span><br><span class="line">r = [];</span><br><span class="line">rr = <span class="title function_">encode_row</span>(R);</span><br><span class="line"><span class="keyword">for</span>(C = range.<span class="property">s</span>.<span class="property">c</span>; C &lt;= range.<span class="property">e</span>.<span class="property">c</span>; ++C) &#123;</span><br><span class="line">ref = cols[C] + rr;</span><br><span class="line"><span class="keyword">if</span>(ws[ref] === <span class="literal">undefined</span>) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span>((cell = <span class="title function_">write_ws_xml_cell</span>(ws[ref], ref, ws, opts, idx, wb)) != <span class="literal">null</span>) r.<span class="title function_">push</span>(cell);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(r.<span class="property">length</span> &gt; <span class="number">0</span>)&#123;</span><br><span class="line">      params = (&#123;<span class="attr">r</span>:rr&#125;);</span><br><span class="line">      <span class="keyword">if</span>(rows &amp;&amp; rows[R]) &#123;</span><br><span class="line">        row = rows[R];</span><br><span class="line">        <span class="keyword">if</span>(row.<span class="property">hidden</span>) params.<span class="property">hidden</span> = <span class="number">1</span>;</span><br><span class="line">        height = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (row.<span class="property">hpx</span>) height = <span class="title function_">px2pt</span>(row.<span class="property">hpx</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (row.<span class="property">hpt</span>) height = row.<span class="property">hpt</span>;</span><br><span class="line">        <span class="keyword">if</span> (height &gt; -<span class="number">1</span>) &#123; params.<span class="property">ht</span> = height; params.<span class="property">customHeight</span> = <span class="number">1</span>; &#125;</span><br><span class="line">        <span class="keyword">if</span> (row.<span class="property">level</span>) &#123; params.<span class="property">outlineLevel</span> = row.<span class="property">level</span>; &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      o[o.<span class="property">length</span>] = (<span class="title function_">writextag</span>(<span class="string">&#x27;row&#x27;</span>, r.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>), params));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="keyword">if</span>(rows) <span class="keyword">for</span>(; R &lt; rows.<span class="property">length</span>; ++R) &#123;</span><br><span class="line">    <span class="keyword">if</span>(rows &amp;&amp; rows[R]) &#123;</span><br><span class="line">      params = (&#123;<span class="attr">r</span>:R+<span class="number">1</span>&#125;);</span><br><span class="line">      row = rows[R];</span><br><span class="line">      <span class="keyword">if</span>(row.<span class="property">hidden</span>) params.<span class="property">hidden</span> = <span class="number">1</span>;</span><br><span class="line">      height = -<span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (row.<span class="property">hpx</span>) height = <span class="title function_">px2pt</span>(row.<span class="property">hpx</span>);</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (row.<span class="property">hpt</span>) height = row.<span class="property">hpt</span>;</span><br><span class="line">      <span class="keyword">if</span> (height &gt; -<span class="number">1</span>) &#123; params.<span class="property">ht</span> = height; params.<span class="property">customHeight</span> = <span class="number">1</span>; &#125;</span><br><span class="line">      <span class="keyword">if</span> (row.<span class="property">level</span>) &#123; params.<span class="property">outlineLevel</span> = row.<span class="property">level</span>; &#125;</span><br><span class="line">      o[o.<span class="property">length</span>] = (<span class="title function_">writextag</span>(<span class="string">&#x27;row&#x27;</span>, <span class="string">&quot;&quot;</span>, params));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">return</span> o.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//前面新增了三句代码也要复制过来，保存后要重启vue项目</span></span><br></pre></td></tr></table></figure></li><li><p>执行脚本，打补丁</p><p>因为 源码 被修改了，所以我们要把变化的地方打个补丁上去：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 运行patch-package命令创建.patch文件</span><br><span class="line">npx patch-package some-package</span><br></pre></td></tr></table></figure><p>如果第一次使用会在根目录下生成 <code>patches</code> 文件夹，此文件夹为补丁目录</p><p><img src="C:/Users/fuyuhao/AppData/Roaming/Typora/typora-user-images/image-20240731110638067.png" alt="image-20240731110638067"></p></li><li><p>测试补丁是否生效</p><p>删除node_modules目录，然后重新运行npm install，安装完成后，查看你修改的node_modules里面的代码是否还在。如果在，就说明补丁生效了。</p></li><li><p>提交代码后重新 <code>install</code> 就ok了</p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> 问题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js中数字计算时丢失精度问题解决</title>
      <link href="/blog/2024/07/22/js%E4%B8%AD%E6%95%B0%E5%AD%97%E8%AE%A1%E7%AE%97%E6%97%B6%E4%B8%A2%E5%A4%B1%E7%B2%BE%E5%BA%A6%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/blog/2024/07/22/js%E4%B8%AD%E6%95%B0%E5%AD%97%E8%AE%A1%E7%AE%97%E6%97%B6%E4%B8%A2%E5%A4%B1%E7%B2%BE%E5%BA%A6%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="js中数字计算时丢失精度问题解决"><a href="#js中数字计算时丢失精度问题解决" class="headerlink" title="js中数字计算时丢失精度问题解决"></a>js中数字计算时丢失精度问题解决</h1><p>在 JavaScript 中，浮点数运算时常会出现精度丢失问题，因为 JavaScript 使用 IEEE 754 双精度浮点数标准表示数字，这可能导致在进行数学运算时精度丢失。为了解决这个问题，可以采用以下几种策略和工具来确保计算精度：</p><h3 id="1-使用整数运算"><a href="#1-使用整数运算" class="headerlink" title="1. 使用整数运算"></a>1. <strong>使用整数运算</strong></h3><p>尽量将浮点数转换为整数进行运算，然后再将结果转换回浮点数。例如，如果你需要处理货币金额（通常保留两位小数），可以将金额转换为以分为单位的整数进行运算：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 原始金额</span><br><span class="line">let amount = 0.1 + 0.2; // 结果可能是 0.30000000000000004</span><br><span class="line"></span><br><span class="line">// 转换为整数（以分为单位）</span><br><span class="line">let amountInCents = Math.round(amount * 100); // 30</span><br><span class="line"></span><br><span class="line">// 再次转换为浮点数（以元为单位）</span><br><span class="line">let preciseAmount = amountInCents / 100; // 0.30</span><br></pre></td></tr></table></figure><h3 id="2-使用-toFixed-方法"><a href="#2-使用-toFixed-方法" class="headerlink" title="2. 使用 toFixed 方法"></a>2. <strong>使用 <code>toFixed</code> 方法</strong></h3><p><code>toFixed</code> 方法可以将浮点数转换为指定小数位数的字符串，避免了显示时的精度问题。但需要注意，<code>toFixed</code> 返回的是字符串类型，如果需要使用数字进行进一步运算，需要转换回数字类型：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let num = 0.1 + 0.2;</span><br><span class="line">let fixedNum = (num * 100).toFixed(2); // &quot;30.00&quot;</span><br><span class="line">let preciseNum = parseFloat(fixedNum); // 30.00</span><br></pre></td></tr></table></figure><h3 id="3-使用-Math-round-或-Math-floor-Math-ceil"><a href="#3-使用-Math-round-或-Math-floor-Math-ceil" class="headerlink" title="3. 使用 Math.round 或 Math.floor &#x2F; Math.ceil"></a>3. <strong>使用 <code>Math.round</code> 或 <code>Math.floor</code> &#x2F; <code>Math.ceil</code></strong></h3><p>通过四舍五入、向下取整或向上取整来处理浮点数的精度问题：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let num = 0.1 + 0.2;</span><br><span class="line">let roundedNum = Math.round(num * 100) / 100; // 0.30</span><br><span class="line">let flooredNum = Math.floor(num * 100) / 100; // 0.30</span><br><span class="line">let ceiledNum = Math.ceil(num * 100) / 100; // 0.31 (如果有必要)</span><br></pre></td></tr></table></figure><h3 id="4-使用精度处理库"><a href="#4-使用精度处理库" class="headerlink" title="4. 使用精度处理库"></a>4. <strong>使用精度处理库</strong></h3><p>有许多 JavaScript 库专门处理高精度数学计算，可以避免浮点数精度问题，例如：</p><ul><li>**<code>decimal.js</code>**：提供了任意精度的数字计算。</li><li>**<code>big.js</code>**：用于高精度的数字计算。</li><li>**<code>bignumber.js</code>**：用于大数计算和高精度浮点运算。</li></ul><p>示例使用 <code>decimal.js</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 引入 decimal.js 库</span><br><span class="line">const Decimal = require(&#x27;decimal.js&#x27;);</span><br><span class="line"></span><br><span class="line">// 创建 Decimal 对象</span><br><span class="line">let num1 = new Decimal(0.1);</span><br><span class="line">let num2 = new Decimal(0.2);</span><br><span class="line">let result = num1.plus(num2); // 精确结果</span><br><span class="line"></span><br><span class="line">console.log(result.toString()); // 0.3</span><br></pre></td></tr></table></figure><h3 id="5-数学技巧"><a href="#5-数学技巧" class="headerlink" title="5. 数学技巧"></a>5. <strong>数学技巧</strong></h3><p>有时可以通过数学技巧来减少浮点数运算的误差，例如通过乘法和除法将所有运算转换为整数运算，最终再转换回浮点数。</p><h3 id="6-格式化输出"><a href="#6-格式化输出" class="headerlink" title="6. 格式化输出"></a>6. <strong>格式化输出</strong></h3><p>如果精度问题仅在输出时需要解决，可以格式化输出时将数字转换为指定的小数位数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let num = 0.1 + 0.2;</span><br><span class="line">let formattedNum = num.toFixed(2); // &quot;0.30&quot;</span><br><span class="line">console.log(formattedNum);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 问题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器配置</title>
      <link href="/blog/2024/04/16/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/"/>
      <url>/blog/2024/04/16/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="Ubuntu云服务器开发环境配置"><a href="#Ubuntu云服务器开发环境配置" class="headerlink" title="Ubuntu云服务器开发环境配置"></a>Ubuntu云服务器开发环境配置</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><ul><li>服务器使用的 阿里云 云服务器 ECS</li><li>镜像：ubuntu_22_04_x64_20G_alibase_20240220.vhd</li></ul><h2 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h2><h3 id="1-安装配置"><a href="#1-安装配置" class="headerlink" title="1. 安装配置"></a>1. 安装配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line"></span><br><span class="line">sudo apt install mysql-server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检查MySQL状态</span></span><br><span class="line">sudo systemctl status mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动mysql</span></span><br><span class="line">sudo systemctl start mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">停止mysql</span></span><br><span class="line">sudo systemctl stop mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开机自启动</span></span><br><span class="line">sudo systemctl enable mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入mysql</span></span><br><span class="line">sudo mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改root密码</span></span><br><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified with mysql_native_password by &#x27;123456&#x27;;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建全局访问root用户</span></span><br><span class="line">create user &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改密码</span></span><br><span class="line">alter user &#x27;root&#x27;@&#x27;%&#x27; identified with mysql_native_password by &#x27;123456&#x27;;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">授予权限</span></span><br><span class="line">grant all on *.* to &#x27;root&#x27;@&#x27;%&#x27;;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">刷新权限</span></span><br><span class="line">flush privileges;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">退出mysql命令窗口</span></span><br><span class="line">exit</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">连不上参考下面</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置8.0版本参考：我这里通过这种方式没有实现所有IP都能访问；</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">我是通过直接修改配置文件才实现的，</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">MySQL8.0版本把配置文件 my.cnf 拆分成mysql.cnf 和mysqld.cnf，</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">我们需要修改的是mysqld.cnf文件：</span></span><br><span class="line">sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改 bind-address，保存后重启MySQL即可。</span></span><br><span class="line">bind-address = 0.0.0.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启MySQL重新加载一下配置：</span></span><br><span class="line">sudo systemctl restart mysql</span><br></pre></td></tr></table></figure><h3 id="2-配置安全组"><a href="#2-配置安全组" class="headerlink" title="2. 配置安全组"></a>2. 配置安全组</h3><ul><li><p>在控制台找到安全组</p></li><li><p>点击管理规则-选择快速添加找到MySQL</p><p><img src="/blog/2024/04/16/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/image-20240329132056836.png" alt="image-20240329132056836"></p></li><li><p>如果没有快速添加可以自己手动添加，MySQL端口号 3306</p></li></ul><h2 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h2><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">先更新系统：</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">然后使用apt安装Redis：</span></span><br><span class="line">sudo apt install redis-server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">安装完成后，测试Redis是否正常工作：</span></span><br><span class="line">redis-cli --version</span><br><span class="line">redis-cli 6.0.16</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看运行状态</span></span><br><span class="line">sudo systemctl status redis-server</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以看到下面这些</span></span><br><span class="line">...</span><br><span class="line">redis-server.service - Advanced key-value store</span><br><span class="line">Loaded: loaded (/lib/systemd/system/redis-server.service; enabled; vendor preset: enabled)</span><br><span class="line">Active: active (running) since Sat 2020-06-06 20:03:08 UTC; 10s ago</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="2-配置"><a href="#2-配置" class="headerlink" title="2. 配置"></a>2. 配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑red配置文件</span></span><br><span class="line">sudo vim /etc/redis.conf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">找到 <span class="built_in">bind</span> 127.0.0.1 ::1 开头的一行，并且取消它的注释， 改成允许所有源</span></span><br><span class="line">bind 0.0.0.0 ::1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启服务</span></span><br><span class="line">sudo systemctl restart redis-server</span><br></pre></td></tr></table></figure><h3 id="3-安全组配置"><a href="#3-安全组配置" class="headerlink" title="3. 安全组配置"></a>3. 安全组配置</h3><ul><li>在控制台找到安全组</li><li>点击管理规则-选择快速添加找到Redis</li><li>如果没有快速添加可以自己手动添加，Redis端口号 6379</li></ul><h2 id="安装java编译环境"><a href="#安装java编译环境" class="headerlink" title="安装java编译环境"></a>安装java编译环境</h2><h3 id="1-安装-1"><a href="#1-安装-1" class="headerlink" title="1. 安装"></a>1. 安装</h3><ul><li>下载jdk安装包<ul><li>进入<a href="https://www.oracle.com/cn/">oracle官网</a></li><li>选择产品–java</li><li>选择自己匹配的版本，下载到本地</li><li><img src="/blog/2024/04/16/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE/image-20240329142341497.png" alt="image-20240329142341497"></li></ul></li></ul><ol><li><p>解压安装包</p><ul><li><p>将本地的压缩包使用 Xftp 上传到服务器中 （上传目录看自己喜好，我上传到 &#x2F;usr&#x2F;local）</p></li><li><p>在 &#x2F;usr&#x2F;local 创建文件夹 java 并进入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">sudo mkdir java</span><br><span class="line">cd java</span><br></pre></td></tr></table></figure></li><li><p>将上⾯准备好的 JDK 安装包解压到 &#x2F;usr&#x2F;local&#x2F;java 中即可</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf /usr/local/安装包名 -C ./</span><br></pre></td></tr></table></figure></li><li><p>解压完成后，&#x2F;usr&#x2F;local&#x2F;java ⽬录中会出现⼀个jdk1.8.0_401的⽬录</p></li></ul></li><li><p>配置环境变量</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打开配置文件</span></span><br><span class="line">sudo vim /etc/profile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑</span></span><br><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_401/</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">验证</span></span><br><span class="line">root@iZ0jlf9o6wopwl3qt6cl28Z:/etc# java -version</span><br><span class="line">java version &quot;1.8.0_401&quot;</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_401-b10)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.401-b10, mixed mode)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-运行项目"><a href="#2-运行项目" class="headerlink" title="2. 运行项目"></a>2. 运行项目</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 上传打好的jar包到服务器</span></span><br><span class="line"><span class="comment"># 比如上传到如下目录，上传可以使用Xftp</span></span><br><span class="line">/usr/local/services</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用vim或者记事本编写一个启动文件，startup.sh 内容如下</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar /usr/local/services/xxx.jar &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件授权</span></span><br><span class="line">sudo <span class="built_in">chmod</span> 777 /usr/local/services/startup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">./startup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 控制台出现如下一串信息 ，按回车即可</span></span><br><span class="line"><span class="built_in">nohup</span>: appending output to <span class="string">&#x27;nohup.out&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装</span></span><br><span class="line">sudo apt install -y nginx </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动服务</span></span><br><span class="line">sudo systemctl start nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开机运行</span></span><br><span class="line">sudo systemctl enable nginx</span><br></pre></td></tr></table></figure><h2 id="配置防火墙"><a href="#配置防火墙" class="headerlink" title="配置防火墙"></a>配置防火墙</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新系统</span></span><br><span class="line">sudo apt update</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动防火墙</span></span><br><span class="line">sudo ufw enable</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">（可选）允许特定端口或服务：</span></span><br><span class="line">sudo ufw allow 22/tcp    # 允许SSH（通常为22/tcp）</span><br><span class="line">sudo ufw allow 80/tcp    # 允许HTTP（通常为80/tcp）</span><br><span class="line">sudo ufw allow 443/tcp   # 允许HTTPS（通常为443/tcp）</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（可选）拒绝特定端口或服务：</span></span><br><span class="line">sudo ufw deny 3306/tcp  # 拒绝MySQL（通常为3306/tcp）</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除规则</span></span><br><span class="line">sudo ufw delete allow 80/tcp    # 删除允许HTTP的规则</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看防火墙状态及规则列表</span></span><br><span class="line">sudo ufw status verbose</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">禁用ufw</span></span><br><span class="line">sudo ufw disable</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java概述</title>
      <link href="/blog/2023/11/13/java%E6%A6%82%E8%BF%B0/"/>
      <url>/blog/2023/11/13/java%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="Java快速入门"><a href="#Java快速入门" class="headerlink" title="Java快速入门"></a>Java快速入门</h2><h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><ul><li>需求说明<br>要求开发一个Hello.java程序，可以输出“Hello World”</li><li>开发步骤<ol><li>将java代码编写到拓展名为 “.java”的文件中</li><li>通过javac命令对该java文件进行编译，生成.class文件</li><li>通过java命令对生成的.class文件进行运行</li></ol></li><li>代码实现<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是java的快速入门</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 对代码的相关说明</span></span><br><span class="line"><span class="comment">// 1. public class Hello 表示Hello 是一个类，是一个public（公有）的类</span></span><br><span class="line"><span class="comment">// 2. Hello&#123;&#125; 表示一个类的开始和结束</span></span><br><span class="line"><span class="comment">// 3. public static void main(String[] args)  表示一个主方法，即我们程序的入口</span></span><br><span class="line"><span class="comment">// 4. main()&#123;&#125; 表示一个主方法的开始和结束</span></span><br><span class="line"><span class="comment">// 5. System.out.println(&quot;hello world&quot;); 表示输出语句</span></span><br><span class="line"><span class="comment">// 6. “;” 表示语句结束</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意： 编码格式需要GBK</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">  <span class="comment">// 编写一个主方法</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>java开发的注意事项和细节说明<ol><li>java源文件以.java为拓展名。 源文件的基本组成部分是类（class），如本类中的Hello类</li><li>Java应用程序的执行入口时main()方法，他有固定的书写格式<br>  public static void main(String[] args) {…}</li><li>Java语言严格区分大小写</li><li>Java方法由一条条语句构成，每个语句以“;”结束</li><li>大括号都是成对出现的，缺一不可。</li><li>一个源文件中最多只能有一个public类。其他类的个数不限</li><li>如果源文件包含一个public类，则文件名必须按该类名命名</li><li>一个源文件中最多只能有一个public类。其他类的个数不限，也可以将main方法写在非public类中，然后指定运行非public类，这样入口方法就是非public类中的main方法</li></ol></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> JAVA学习笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>markdown的基础用法</title>
      <link href="/blog/2023/11/03/markdown%E7%9A%84%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/"/>
      <url>/blog/2023/11/03/markdown%E7%9A%84%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>markdown是一种使用一定的语法将普通的文本转换成HTML标签文本的编辑语言，它的特点是可以使用普通的文本编辑器来编写，只需要按照特定的语法标记就可以得到丰富多样的HTML格式的文本，虽然看起来挺多，但大部分时间用不到，最常用的就是标题和列表了</p><p>标题分级<br>在当前行之前输入 “#+空格”可以使当前行被识别为标题</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 这是一级标题</span></span><br><span class="line"><span class="section">## 这是二级标题</span></span><br><span class="line"><span class="section">### 这是三级标题</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>分割线<br>使用三个或以上的“-“或者”*“，且这一行只有符号，注意不要被识别为二级标题即可，意思是上面需要是空行，例如中间或者前面可以加空格</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">---</span></span><br><span class="line">------</span><br><span class="line"><span class="strong">****</span>**</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure><p>斜体和粗体<br>使用 (*或者_ )和( **或者__) 分别表示斜体和粗体，删除线使用两个 ~ 表示</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="emphasis">*我是斜体*</span></span><br><span class="line"><span class="emphasis">_我是斜体_</span></span><br><span class="line"><span class="strong">**我是加粗**</span></span><br><span class="line"><span class="strong">__我是加粗__</span></span><br><span class="line">~~我是删除~~</span><br><span class="line"><span class="strong">**<span class="emphasis">*我是又粗又斜*</span>**</span></span><br><span class="line"><span class="strong">__<span class="emphasis">_我是又粗又斜_</span>__</span></span><br></pre></td></tr></table></figure><p>超链接和图片引用<br>超链接<br>内联超链接</p><p>使用<a href="%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80">链接文字</a>来表示，如果要给链接一个提示信息，可以在链接用引号把文字包围起来，就像这样<a href="%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80+%E7%A9%BA%E6%A0%BC+%22%E6%96%87%E5%AD%97%E8%AF%B4%E6%98%8E%22">链接文字</a></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">链接例子《就是外在文字》</span>](<span class="link">http://www.baidu.com/&quot; 我是说明文字：我其实就是HTML 的&lt;a&gt; 标签的 Title 属性&quot;</span>)</span><br></pre></td></tr></table></figure><p>自动超链接<br>以比较简短的自动链接形式来处理网址和电子邮件信箱，只要是用&lt;&gt;包起来， Markdown 就会自动把它转成链接</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&lt;http://example.com/&gt;</span></span><br></pre></td></tr></table></figure><p>引用超链接<br>在任意地方使用[链接引用标记]:链接地址+空格+”文字说明” 来定义引用的链接地址,然后使用[链接文字][链接引用标记]放在需要插入链接的地方</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">link1</span>]:<span class="link">http://www.baidu.com/ “baidu.com 其实就是HTML 的&lt;a&gt; 标签的 Title 属性”</span></span><br><span class="line">[<span class="string">引用式链接例子《就是外在文字》</span>][<span class="symbol">link1</span>]</span><br></pre></td></tr></table></figure><p>引用超链接-简化<br>该功能让你可以省略指定链接标记，这种情形下，链接标记会视为等同于链接文字，只要在链接文字后面加上一个空的方括号，如果你要让 “Google” 链接到 google.com,这么写就行</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">Google</span>][<span class="symbol"></span>]</span><br><span class="line">[<span class="symbol">Google</span>]: <span class="link">http://google.com/</span></span><br></pre></td></tr></table></figure><p>图片引用<br>内联式图片引用<br>图片引用仅在超链接前多了一个 ! ，一般是<code>![图片文字](图片地址+空格+&quot;文字说明&quot;)</code></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="symbol">link2</span>]:<span class="link">http://www.baidu.com/images/logo.png “baidu.com 其实就是HTML 的&lt;a&gt; 标签的 Title 属性”</span></span><br><span class="line">![<span class="string">引用式图片链接例子《就是Alt属性》</span>][<span class="symbol">link2</span>]</span><br></pre></td></tr></table></figure><p>带有链接的图片<br>部分markdown编辑器只需要将链接代码套在图片代码外边就可以实现</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">![图片例子</span>](<span class="link">http://www.baidu.com/images/logo.png “图片说明文字”</span>)](<span class="link">http://www.baidu.com/ “链接说明文字”</span>)</span><br></pre></td></tr></table></figure><p>无序列表<br>使用 -、+ 和 *+空格 +文字内容 表示无序列表<br>可用tab 或者空格 + -、+ 或者 * +文字内容使列表嵌套<br>成功嵌套的条件是下一层的-、+ 和 * 的前面的空白长度满足以下条件</p><p>有序列表<br>使用 1. +空格 +文字内容 表示有序列表，可嵌套。<br>可用tab 或者空格 + -、+ 或者 * +文字内容使列表嵌套<br>成功嵌套的条件是下一层的-、+ 和 * 的前面的空白长度满足以下条件</p><p>文字引用<br>使用 &gt; 表示，可以有多个 &gt;，表示层级更深</p><p>要从深层到浅层需要在浅层上方留一个有与层数相同个数 &gt;的空行</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;文字内容</span><br><span class="line">&gt;文字内容</span><br><span class="line">&gt;&gt;文字内容</span><br><span class="line"><span class="quote">&gt;</span></span><br><span class="line"><span class="quote">&gt;文字内容</span></span><br><span class="line">&gt;文字内容</span><br></pre></td></tr></table></figure><p>行内代码块<br>使用 “ &#96; “ 把代码包围起来即可</p><blockquote><p><code>a=1</code><br>如果要在代码区段内插入反引号，你可以用多个反引号来开启和结束代码区段：</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">`` There is a literal backtick (`</span>) here.``</span><br></pre></td></tr></table></figure><p>代码块<br>一些 IDE 支持行数提示和着色，一般使用三个 ‘&#96;’，而且代码块的第一行的3个 后面可以写上代码的编程语言，方便Markdown转化之后进行高亮显示，如写上HTML或者js</p><p>‘<br>&#96;html’</p><p>‘<br>&#96;js’</p><p>表格<br>表格由3个部分组成</p><p>第一个部分是表格的标题，使用|来作为列的分割<br>第二个部分是表示列的对齐方式，有左对齐、居中对齐和居右对齐三种类型，直接看例子吧， — 表示了默认的左对齐， :— 表示 左对齐 ， —: 表示 右对齐 ， :—: 表示居中对齐<br>第三个部分就是内容了，表示方式跟标题一样，可以有多行</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|左对齐标题|右对齐标题|居中对齐标题|</span><br><span class="line">|-|------: |:------: |</span><br><span class="line">|居左|居右|居中|</span><br><span class="line">|测试文本|测试文本|测试文本|</span><br></pre></td></tr></table></figure><p>实例显示</p><p>左对齐标题右对齐标题居中对齐标题<br>居左居右居中<br>测试文本测试文本测试文本<br>流程图<br>不同的Markdown解析器原理不同，不一定支持流程图<br>obsidian 支持 mermaid 流程图。其他的流程图也许要安装插件<br>mermaid文档: <a href="https://mermaid-js.github.io/mermaid/#/README">https://mermaid-js.github.io/mermaid/#/README</a><br>mermaid在线编辑器: <a href="https://mermaid-js.github.io/mermaid-live-editor">https://mermaid-js.github.io/mermaid-live-editor</a></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mermaid   </span><br><span class="line">sequenceDiagram  </span><br><span class="line">Alice-&gt;&gt;John: Hello John, how are you?  </span><br><span class="line">loop Healthcheck  </span><br><span class="line">John-&gt;&gt;John: Fight against hypochondria  </span><br><span class="line">end  </span><br><span class="line">Note right of John: Rational thoughts!  </span><br><span class="line">John--&gt;&gt;Alice: Great!  </span><br><span class="line">John-&gt;&gt;Bob: How about you?  </span><br><span class="line">Bob--&gt;&gt;John: Jolly good! </span><br></pre></td></tr></table></figure><p>脚注<br>在文档末尾写上[+^+数字+]:+文字内容 声明一个脚注<br>然后就跟文献引用一样，在要引用该脚注的文字后插入[+^+数字+]即可</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">该方法根据实验证明有效[^1]</span><br><span class="line">[<span class="symbol">^1</span>]:<span class="link">文章链接</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>scss语法学习</title>
      <link href="/blog/2023/11/03/SCSS%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/"/>
      <url>/blog/2023/11/03/SCSS%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>一、基本使用</p><ol><li>使用变量$<br>先说明下载css中定义变量的写法</li></ol><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--color</span>:<span class="number">#f00</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attr">--border-color</span>:<span class="number">#f2f2f2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attr">--background-color</span>:<span class="number">#f8f8f8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--color);</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">var</span>(--border-color);</span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--background-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在scss中定义变量有如下规则：</p><p>变量名以美元 $ 开头，后面跟变量名；<br>变量名是不以数字开头的可包含字母、数字、下划线、横线（连接符）；<br>写法同 css，即变量名与值之间用 : 分隔；<br>变量一定要先定义，后使用；<br>注意，在定义变量时，$font-B和$font_B是一样的含义，写在后面的会覆盖前面的变量。可用于配置颜色、字体，或全局配置图片路径等。</p><ol start="2"><li><p>默认变量值 !default<br>!default 可以给变量赋予默认值。该变量假如已经赋值，那么它不会被重新赋值，但是，如果它尚未赋值，那么它会被赋予新的给定值。</p></li><li><p>局部变量和全局变量<br>局部变量： 在选择器内定义的变量，只能在选择器范围内使用，相当于块作用域；<br>全局变量：定义后能全局使用的变量，有两种定义方式，一种是在选择器外面的最前面定义的变量；另一种是使用 !global 标志定义全局变量。</p></li><li><p>变量值类型<br>变量值的类型可以有很多种，SASS支持7种主要的数据类型：</p></li></ol><p>数字 (例如： 1.2, 13, 10px)<br>文本字符串，带引号字符串和不带引号字符串(例如：”foo”, ‘bar’, baz)<br>颜色 (例如：blue, #04a3f9, rgba(255, 0, 0, 0.5))<br>布尔值 (例如： true, false)<br>空值 (例如： null)<br>值列表 (list)，用空格或逗号分隔 (例如： 1.5em 1em 0 2em, Helvetica, Arial, sans-serif)<br>maps ，从一个值映射到另一个 (例如： (key1: value1, key2: value2))<br>注意，用 () 表示不包含任何值的空数组（在 Sass 3.3 版之后也视为空的 map）</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$layer-index</span>:<span class="number">10</span>;</span><br><span class="line"><span class="variable">$border-width</span>:<span class="number">3px</span>;</span><br><span class="line"><span class="variable">$font-base-family</span>:<span class="string">&#x27;Open Sans&#x27;</span>, Helvetica, Sans-Serif;</span><br><span class="line"><span class="variable">$top-bg-color</span>:<span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">147</span>,<span class="number">29</span>,<span class="number">0.6</span>);</span><br><span class="line"><span class="variable">$block-base-padding</span>:<span class="number">6px</span> <span class="number">10px</span> <span class="number">6px</span> <span class="number">10px</span>;</span><br><span class="line"><span class="variable">$blank-mode</span>:true;</span><br><span class="line"><span class="variable">$var</span>:null; <span class="comment">// 值null是其类型的唯一值。它表示缺少值，通常由函数返回以指示缺少结果。</span></span><br><span class="line"><span class="variable">$color-map</span>: (color1: <span class="number">#fa0000</span>, color2: <span class="number">#fbe200</span>, color3: <span class="number">#95d7eb</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$fonts</span>: (serif: <span class="string">&quot;Helvetica Neue&quot;</span>,monospace: <span class="string">&quot;Consolas&quot;</span>);</span><br></pre></td></tr></table></figure><ol start="5"><li>语法嵌套规则<br>选择器嵌套<br>Sass 允许将一个 CSS 样式嵌套进另一个样式中，内层样式仅适用于外层样式的选择器范围内（可以理解为层级选择器），这有助于避免父选择器重复，相对于复杂的CSS布局中多层嵌套的选择器 要简单得多，例如</li></ol><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#00ff00</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">97%</span>;</span><br><span class="line">  <span class="selector-class">.redbox</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ff0000</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000000</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>父选择器 &amp;<br>有些时候需要直接使用嵌套外层的父选择器，这个就很有用了，例如，你可能喜欢给选择器指定 hover样式，或者当body元素具有某个样式时，在这些情况下，你可以 &amp; 字符来明确地表示插入指定父选择器。 例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123; <span class="attribute">text-decoration</span>: underline; &#125;</span><br><span class="line">  <span class="selector-tag">body</span><span class="selector-class">.firefox</span> &amp; &#123; <span class="attribute">font-weight</span>: normal; &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>&amp; 必须出现在的选择器的开头位置（也就是作为选择器的第一个字符），但可以跟随后缀，将被添加到父选择的后面。 例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: black;</span><br><span class="line">  &amp;-sidebar &#123; <span class="attribute">border</span>: <span class="number">1px</span> solid; &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>注意，父选择器 &amp; 被作为一个后缀的时候，Sass 将抛出一个错误。</p><p>嵌套属性<br>CSS中有一些属性遵循相同的“命名空间”；比如，font-family, font-size, 和 font-weight都在font命名空间中。在CSS中，如果你想在同一个命名空间中设置一串属性，你必须每次都输出来。Sass为此提供了一个快捷方式：只需要输入一次命名空间，然后在其内部嵌套子属性。例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.funky</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: &#123;</span><br><span class="line">    family: fantasy;</span><br><span class="line">    size: <span class="number">30em</span>;</span><br><span class="line">    weight: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>命名空间也可以有自己的属性值。例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scss</span></span><br><span class="line"><span class="selector-class">.funky</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">20px</span>/<span class="number">24px</span> fantasy &#123;</span><br><span class="line">    weight: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// 编译为</span></span><br><span class="line"><span class="selector-class">.funky</span> &#123;</span><br><span class="line">  <span class="attribute">font</span>: <span class="number">20px</span>/<span class="number">24px</span> fatasy;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>补充，font 属性的定义<br>font 属性是（按顺序）： “font-style font-variant font-weight font-size&#x2F;line-height font-family”，font-size 和 font-family 的值是必需的。如果缺少了其他值，默认值将被插入，如果有默认值的话。</p><p>占位符选择器 %xxx<br>有时，需要定义一套样式并不是给某个元素用，而是只通过 @extend 指令使用，尤其是在制作 Sass 样式库的时候，希望 Sass 能够忽略用不到的样式。例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.button</span>%base &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    user-select: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果没有通过@extend指令使用这个样式，这个样式在编译成css时是会被忽略的。<br>通过 @extend 指令使用</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scss</span></span><br><span class="line"><span class="selector-class">.btn-default</span> &#123;</span><br><span class="line">    <span class="keyword">@extend</span> %base;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-success</span> &#123;</span><br><span class="line">    <span class="keyword">@extend</span> %base;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#5cb85c</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#4cae4c</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 编译为</span></span><br><span class="line"><span class="selector-class">.button</span><span class="selector-class">.btn-danger</span>, <span class="selector-class">.button</span><span class="selector-class">.btn-success</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    user-select: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-default</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn-success</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#5cb85c</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#4cae4c</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="6"><li>注释<br>Sass支持两种注释</li></ol><p>标准的css多行注释 &#x2F;* … *&#x2F; 会编译到.css文件中<br>单行注释 &#x2F;&#x2F; 不会编译到.css文件<br>7. SASS导入@import<br>@import<br>Sass 拓展了 @import 的功能，允许其导入 SCSS 或 Sass 文件。被导入的文件将合并编译到同一个 CSS 文件中，另外，被导入的文件中所包含的变量或者混合指令 (mixin) 都可以在导入的文件中使用。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// public.scss</span></span><br><span class="line"><span class="variable">$font-base-color</span>: <span class="number">#333</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.scss</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;public&quot;</span></span><br><span class="line">.container &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">$font-base-color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如下几种方式，都将作为普通的css语句，不会导入任何sass文件</p><p>文件拓展名是 .css;<br>文件名以 http:&#x2F;&#x2F; 开头;<br>文件名是 url();<br>@import 包含 media queries</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;public.css&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> url(public);</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&quot;http://xxx.com/xxx&quot;</span>;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;landscape&#x27;</span> screen <span class="keyword">and</span> (<span class="attribute">orientation</span>:landscape);</span><br></pre></td></tr></table></figure><p>局部文件<br>Sass源文件中可以通过@import指令导入其他Sass源文件，被导入的文件就是局部文件，局部文件让Sass模块化编写更加容易。<br>如果一个目录正在被Sass程序监测，目录下的所有scss&#x2F;sass源文件都会被编译，但通常不希望局部文件被编译，因为局部文件是用来被导入到其他文件的。如果不想局部文件被编译，文件名可以以下划线 （_）开头</p><p>嵌套 @import<br>虽然在大部分情况下，一般都是在文档的顶层使用 @import，但是也可以在CSS 规则和@media 规则中包含@import语句。就像一个基层的 @import ，这里会包含 @import 导入文件的内容。但是，只是这样导入的样式只能出现在嵌套的层中。例如</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// _base.scss</span></span><br><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">// index.scss</span></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="keyword">@import</span> <span class="string">&quot;example&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编译为</span></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.example</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>注意：@import不能使用在控制指令或混入中。</p><p>二、指令</p><ol><li>混合指令 (@mixin)<br>混入(mixin)允许您定义可以在整个样式表中重复使用的样式，而避免了使用无语意的类（class），比如 .float-left。混入(mixin)还可以包含所有的CSS规则，以及任何其他在Sass文档中被允许使用的东西。<br>他们甚至可以带arguments，引入变量，只需少量的混入(mixin)代码就能输出多样化的样式。</li></ol><p>基础定义与使用<br>混入(mixin)通过 @mixin 指令定义。在它后面跟混入的名称和任选的arguments，以及混入的内容块。例如，large-text混入定义如下：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> large-text &#123;</span><br><span class="line">  <span class="attribute">font</span>: &#123;</span><br><span class="line">    family: Arial;</span><br><span class="line">    size: <span class="number">20px</span>;</span><br><span class="line">    weight: bold;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>混入也可以包含选择器和属性的混合体，选择器中甚至可以包含父选择器。例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> clearfix &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  &amp;<span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;.&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">  &#125;</span><br><span class="line">  * <span class="selector-tag">html</span> &amp; &#123; <span class="attribute">height</span>: <span class="number">1px</span> &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>注意，由于历史原因，混入（mixin）的名字（和所有其他 Sass 标识符）可以互换连字符和下划线。例如，如果你定义了一个名为add-column的混入，你可以把它作为add_column，反之亦然。</p><p>使用 @include 指令可以将混入（mixin）引入到文档中。这需要一个混入的名称和可选的参数传递给它，并包括由混入定义的当前规则的样式。 例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page-title</span> &#123;</span><br><span class="line">  <span class="keyword">@include</span> large-text;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>混入（mixin）定义也可以包含其他的混入。例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> highlighted-background &#123; <span class="attribute">background-color</span>: <span class="number">#fc0</span>; &#125;</span><br><span class="line"><span class="keyword">@mixin</span> header-text &#123; <span class="attribute">font-size</span>: <span class="number">20px</span>; &#125; </span><br><span class="line"><span class="keyword">@mixin</span> compound &#123;</span><br><span class="line">  <span class="keyword">@include</span> highlighted-background;</span><br><span class="line">  <span class="keyword">@include</span> header-text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>带参数混入<br>混入可以用SassScript 值作为参数，给定的参数被包括在混入中并且作为变量提供给混入。<br>当定义一个混入（mixin）的时候，参数被作为变量名，写到混入（mixin）名字后面的括号内，多个参数可以用逗号分隔。然后，当调用混入的时候，值通过对应的参数顺序被传递。 例如</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> sexy-border(<span class="variable">$color</span>, <span class="variable">$width</span>) &#123;</span><br><span class="line">  <span class="attribute">border</span>: &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$color</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="variable">$width</span>;</span><br><span class="line">    style: dashed;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="keyword">@include</span> sexy-border(blue, <span class="number">1in</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当然也可以给参数赋默认值 ($color, $width: 1in)</p><p>如果在使用 @include 指令时明确使用关键字参数，那么命名的参数可以按照任意顺序传递</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123; <span class="keyword">@include</span> sexy-border( <span class="variable">$width</span>: <span class="number">2in</span>, <span class="variable">$color</span>: blue ); &#125; </span><br></pre></td></tr></table></figure><p>如果不确定参数个数的话，可以使用可变参数来定义参数，参数看起来就像普通参数一样，但后面跟随着…。例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> box-shadow(<span class="variable">$shadows</span>...) &#123;</span><br><span class="line">      -moz-<span class="attribute">box-shadow</span>: <span class="variable">$shadows</span>;</span><br><span class="line">      -webkit-<span class="attribute">box-shadow</span>: <span class="variable">$shadows</span>;</span><br><span class="line">      <span class="attribute">box-shadow</span>: <span class="variable">$shadows</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.shadows</span> &#123;</span><br><span class="line">  <span class="keyword">@include</span> box-shadow(<span class="number">0px</span> <span class="number">4px</span> <span class="number">5px</span> <span class="number">#666</span>, <span class="number">2px</span> <span class="number">6px</span> <span class="number">10px</span> <span class="number">#999</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>总结<br>mixin是可以重复使用的一组CSS声明<br>mixin有助于减少重复代码，只需声明一次，就可在文件中引用<br>混合指令可以包含所有的 CSS 规则，绝大部分 Sass 规则，甚至通过参数功能引入变量，输出多样化的样式。<br>使用参数时建议加上默认值<br>2. 函数指令(@function)<br>Sass 支持自定义函数，并能在任何值或脚本上下文中使用。例如：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$grid-width</span>: <span class="number">40px</span>;</span><br><span class="line"><span class="variable">$gutter-width</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@function</span> grid-width(<span class="variable">$n</span>) &#123;</span><br><span class="line">  <span class="keyword">@return</span> <span class="variable">$n</span> * <span class="variable">$grid-width</span> + (<span class="variable">$n</span> - <span class="number">1</span>) * <span class="variable">$gutter-width</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#sidebar</span> &#123; <span class="attribute">width</span>: <span class="built_in">grid-width</span>(<span class="number">5</span>); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="selector-id">#sidebar</span> &#123; <span class="attribute">width</span>: <span class="number">240px</span>; &#125;</span><br></pre></td></tr></table></figure><p>函数可以访问任何全局定义的变量，以及接受参数，就像一个混入。函数可以包含语句，并且你必须调用@return 来设置函数的返回值。当然，可以像关键字混入一样，传入参数名来调用函数，也支持可变参数。</p><ol start="3"><li>继承指令 (@extend)<br>在没有继承指令前，以警告框为例，通常会在HTML中定义两个class，一个是通用警告框样式，一个是不同颜色的警告框样式</li></ol><p>使用继承@extend改进<br>可以使用 @extend 继承通用样式，使用时就无需在html中写两个class了</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.alert</span>&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.alert-info</span> &#123;</span><br><span class="line">    <span class="keyword">@extend</span> .alert;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#31708f</span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.alert-success</span> &#123;</span><br><span class="line">    <span class="keyword">@extend</span> .alert;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#3c763d</span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用多个@extend<br>当然可以使用多个 @extend</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.alert-success</span> &#123;</span><br><span class="line">    <span class="keyword">@extend</span> .alert;</span><br><span class="line">    <span class="keyword">@extend</span> .important;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#3c763d</span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>@extend多层继承<br>一个选择器可以扩展另一个选择器，另一个选择器又扩展的第三选择器选择。 例如:</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.error</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#f00</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fdd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seriousError</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> .error;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.criticalError</span> &#123;</span><br><span class="line">  <span class="keyword">@extend</span> .seriousError;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">10%</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>占位符%<br>被继承的css父类并没有被实际应用，对于该类，可能不希望被编译输出到最终的css文件中，它只会增加CSS文件的大小，永远不会被使用。<br>这时候可以使用占位符%，在Sass文件中使用占位符选择器时，它可以用于扩展其他选择器，但不会被编译成最终的CSS。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">%alert &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.alert-info</span> &#123;</span><br><span class="line">    <span class="keyword">@extend</span> %alert;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#31708f</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#d9edf7</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#bce8f1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>@use指令<br>@use 可以从其他 sass 样式表加载 mixin， funcition 和变量，并将来自多个样式表的css组合在一起。<br>通过 @use “module” 使用模块时，可以不需要写扩展名，程序会自动查找。<br>语法：@use “Address” as spacename;<br>Adress: scss 文件路径<br>spacename：命名空间（防止加载多个文件导致引用混淆）<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@use</span> <span class="string">&quot;_base.scss&quot;</span> as base;</span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="keyword">@include</span> base.borderColor;</span><br><span class="line">  <span class="attribute">color</span>: base.<span class="variable">$color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>重要的是，通过@use 加载的模块不管被引用多少次，都会在编译后输出一次到css中。但使用@import多次引入同一模块，会反复输出到css中。</li></ol><p>注意，@use的前面只能出现@forward或变量声明，其它的所有代码只能出现在 @use 之后。</p><ol start="5"><li>@forward指令<br>当使用@use加载文件A时，当前文件中可以使用@forward来使A文件中的 mixin，函数和变量可以暴露出去。通常用于跨多个文件组织 sass 库。<br>通过 @forward 加载一个模块的成员，这些成员并不能在当前文件内访问，而仅仅是将这些成员当作自己的成员对外暴露出去。例如：<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.scss</span></span><br><span class="line"><span class="variable">$color</span>:red;</span><br><span class="line"><span class="selector-class">.a</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$color</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//b.scss</span></span><br><span class="line"><span class="keyword">@forward</span> <span class="string">&#x27;a.scss&#x27;</span>; <span class="comment">// 转发a中的变量，并引入普通样式代码</span></span><br><span class="line"><span class="selector-class">.b</span>&#123;</span><br><span class="line">    <span class="comment">// 虽然没有使用 @use 不能访问模块 a.scss 的变量，但可以继承它的样式</span></span><br><span class="line">    <span class="keyword">@extend</span> .a;</span><br><span class="line">    <span class="comment">// 如果写 color: a.$red 会报错，因为没有使用 @use &quot;a.scss&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//css.scss</span></span><br><span class="line"><span class="keyword">@use</span> <span class="string">&#x27;b.scss&#x27;</span>;</span><br><span class="line"><span class="selector-class">.index</span>&#123;</span><br><span class="line">    <span class="keyword">@extend</span> .a;</span><br><span class="line">    <span class="attribute">background-color</span>: b.<span class="variable">$color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>通过 @forward “module” as xxx-* 可以给同一个模块中的成员统一添加前缀。<br>假设有 a.scss， b.scss， c.scss 三个模块中都有一个名叫 $color 的变量：<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bus.scss</span></span><br><span class="line"><span class="keyword">@forward</span> <span class="string">&#x27;a.scss&#x27;</span> as a-*;</span><br><span class="line"><span class="keyword">@forward</span> <span class="string">&#x27;b.scss&#x27;</span> as b-*;</span><br><span class="line"><span class="keyword">@forward</span> <span class="string">&#x27;c.scss&#x27;</span> as c-*;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.scss</span></span><br><span class="line"><span class="keyword">@use</span> <span class="string">&#x27;bus.scss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.index</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: bus.<span class="variable">$a-color</span>;</span><br><span class="line">  <span class="attribute">color</span>: bus.<span class="variable">$b-color</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid bus.<span class="variable">$c-color</span>;</span><br><span class="line">在转发其他模块的成员时，可以对成员进行配置，修改默认值，或者指定一个确定的值均可。</span><br><span class="line"></span><br><span class="line"><span class="comment">// a.scss</span></span><br><span class="line"><span class="variable">$red</span>: <span class="number">#f00</span> !default;</span><br><span class="line"><span class="variable">$black</span>: <span class="number">#000</span> !default;</span><br><span class="line"><span class="variable">$green</span>: <span class="number">#0f0</span> !default;</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.scss</span></span><br><span class="line"><span class="comment">// 转发成员时进行配置，修改默认值，或修改为固定的值</span></span><br><span class="line"><span class="keyword">@forward</span> <span class="string">&#x27;a.scss&#x27;</span> with (</span><br><span class="line">  <span class="variable">$red</span>: <span class="number">#f55</span> !default,</span><br><span class="line">  <span class="variable">$black</span>: <span class="number">#333</span>,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.scss</span></span><br><span class="line"><span class="keyword">@use</span> <span class="string">&#x27;b.scss&#x27;</span> with (</span><br><span class="line">  <span class="variable">$red</span>: <span class="number">#f11</span>,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: b.<span class="variable">$red</span>;                <span class="comment">// #f11</span></span><br><span class="line">  <span class="attribute">background-color</span>: b.<span class="variable">$black</span>;   <span class="comment">// #333</span></span><br><span class="line">  <span class="attribute">border-color</span>: b.<span class="variable">$green</span>;       <span class="comment">// #0f0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>默认情况下，@forward 会将一个模块中所有成员都转发，如果只想转发某些成员，或不想转发某些成员，可以这样书写：</li></ol><p>@forward “module” hide $var, mixinName, fnName 禁止转发某些成员<br>@forward “module” show $var, mixinName, fnName 只转发某些成员<br>各个成员通过逗号 , 分隔开，如果成员是变量，不能省略 $符号。</p><p>三、SassScript</p><ol><li>SASS 运算 (Operations)符的基本使用<br>等号操作符<br>所有的数据都支持等号运算符：<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">符号说明</span><br><span class="line">==等于</span><br><span class="line">!=不等于</span><br></pre></td></tr></table></figure>例1：数字比较<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$theme</span>:<span class="number">1</span>;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="keyword">@if</span> <span class="variable">$theme</span>==<span class="number">1</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@else</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: blue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>例2：字符串比较<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$theme</span>:<span class="string">&quot;blue&quot;</span>;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="keyword">@if</span> <span class="variable">$theme</span> !=<span class="string">&quot;blue&quot;</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@else</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: blue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>关系（比较）运算符<br>关系运算符只能用于整数比较</li></ol><p>符号说明<br>&lt;(lt)小于</p><blockquote><p>(gt)大于<br>&lt;&#x3D;(lte)小于等于<br>&#x3D;(gte)大于等于<br>例子</p></blockquote><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$theme</span>:<span class="number">3</span>;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="keyword">@if</span> <span class="variable">$theme</span> &gt;= <span class="number">5</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@else</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: blue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>逻辑运行符<br>符号说明<br>and逻辑与<br>or逻辑或<br>not逻辑非</p><ul><li>运算符<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>: <span class="number">50</span> + <span class="number">20</span>;     <span class="comment">// 70</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50</span> + <span class="number">20%</span>;    <span class="comment">// 70%</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50%</span> + <span class="number">20%</span>;   <span class="comment">// 70%</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">20</span> + <span class="number">10px</span>;   <span class="comment">// 30px</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">10px</span> + <span class="number">20px</span>; <span class="comment">// 30px</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">10px</span> + <span class="number">10pt</span>; <span class="comment">// 23.3333333333px</span></span><br><span class="line"><span class="comment">// width: 20% + 10px;  // Error have incompatible units.</span></span><br><span class="line"><span class="comment">// width: 10px * 2pt;  // Error 20px*pt isn&#x27;t a valid CSS value.</span></span><br><span class="line">- 运算符</span><br><span class="line"></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50</span> - <span class="number">30</span>;     <span class="comment">// 20</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50</span> - <span class="number">30%</span>;    <span class="comment">// 20%</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">60%</span> - <span class="number">30%</span>;   <span class="comment">// 30%</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">20px</span> - <span class="number">10px</span>; <span class="comment">// 10px</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span> - <span class="number">20pt</span>; <span class="comment">// 23.3333333333px</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span> - <span class="number">20</span>;   <span class="comment">// 30px</span></span><br><span class="line"><span class="comment">// width: 50px - 20%;  // Error have incompatible units.</span></span><br><span class="line">*运算符</span><br><span class="line"></span><br><span class="line"><span class="attribute">width</span>: <span class="number">20</span> * <span class="number">10</span>;     <span class="comment">// 200</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">5</span> * <span class="number">20%</span>;     <span class="comment">// 100</span></span><br><span class="line"><span class="comment">// width: 10% * 20%;   //Error 出现了两个百分号</span></span><br><span class="line"><span class="comment">// width: 10px * 20px  //Error 出现了两个单位</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">10px</span> * <span class="number">2</span>;    <span class="comment">// 20px</span></span><br></pre></td></tr></table></figure>&#x2F;运算符<br>&#x2F;在 CSS 中通常起到分隔数字的用途，SassScript 作为 CSS 语言的拓展当然也支持这个功能，同时也赋予了 &#x2F;除法运算的功能。也就是说，如果&#x2F;在 SassScript 中把两个数字分隔，编译后的 CSS 文件中也是同样的作用。<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>: <span class="number">10</span> / <span class="number">5</span>;    <span class="comment">// 此时的/没有被当作运算符，原样输出 10 / 5 </span></span><br><span class="line"><span class="attribute">width</span>: (<span class="number">10</span> / <span class="number">5</span>);  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>以下三种情况 &#x2F; 将被视为除法运算符号：</li></ul><p>如果值或值的一部分，是变量或者函数的返回值<br>如果值被圆括号包裹<br>如果值是算数表达式的一部分</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$width</span>: <span class="number">1000px</span>;</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: (<span class="variable">$width</span>/<span class="number">2</span>); <span class="comment">// 使用变量与括号</span></span><br><span class="line">    <span class="attribute">z-index</span>: <span class="built_in">round</span>(<span class="number">10</span>)/<span class="number">2</span>; <span class="comment">// 使用了函数</span></span><br><span class="line">    <span class="attribute">height</span>: (<span class="number">500px</span>/<span class="number">2</span>); <span class="comment">// 使用了括号</span></span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span> + <span class="number">8px</span>/<span class="number">2px</span>; <span class="comment">// 使用了+表达式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>%运算符</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">width</span>: <span class="number">10</span> % <span class="number">3</span>;     <span class="comment">// 1</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50</span> % <span class="number">3px</span>;   <span class="comment">// 2px</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span> % <span class="number">3px</span>; <span class="comment">// 2px</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50%</span> % <span class="number">7</span>;    <span class="comment">// 1%</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span> % <span class="number">7</span>;   <span class="comment">// 1px</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50%</span> % <span class="number">9%</span>;   <span class="comment">// 5%</span></span><br><span class="line"><span class="comment">// width: 50% % 2px;  // Error have incompatible units.</span></span><br><span class="line"><span class="attribute">width</span>: <span class="number">50px</span> % <span class="number">10pt</span>;  <span class="comment">// 10pt == 13.33333px  50px % 10pt=&gt; 10px</span></span><br></pre></td></tr></table></figure><p>字符串运算</p><ul><li>可用于连接字符串<br>注意：如果有引号字符串（位于 + 左侧）连接无引号字符串，运算结果是有引号的，相反，无引号字符串（位于 + 左侧）连接有引号字符串，运算结果则没有引号。（如果有一个值是函数返回的，情况可能不一样）<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;Foo&quot;</span> + Bar;         <span class="comment">// &quot;FooBar&quot;</span></span><br><span class="line">    <span class="attribute">content</span>:  Foo + Bar;           <span class="comment">// FooBar</span></span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;Foo&quot;</span> + <span class="string">&quot;Bar&quot;</span>;       <span class="comment">// &quot;FooBar&quot;</span></span><br><span class="line">    <span class="attribute">font-family</span>: sans- + <span class="string">&quot;serif&quot;</span>;  <span class="comment">// sans-serif</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ol start="2"><li>插值语句#{}<br>使用插值语句#{},可以确保 &#x2F; 不做除法运算而是完整地编译到 CSS 文件中<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="variable">$font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="variable">$line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">font</span>: #&#123;<span class="variable">$font-size</span>&#125;/#&#123;<span class="variable">$line-height</span>&#125; Helvetica,sans-serif;</span><br><span class="line">    <span class="comment">// font: 16px/30px Arial, Helvetica, sans-serif; </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>通过 #{} 插值语句可以在选择器、属性名、注释中使用变量：</li></ol><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$class-name</span>:danger;</span><br><span class="line"><span class="variable">$attr</span>:color;</span><br><span class="line"><span class="variable">$author</span>:<span class="string">&quot;zzz&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    这是文件说明部分</span></span><br><span class="line"><span class="comment">    @author:#&#123;$author&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> .#&#123;<span class="variable">$class-name</span>&#125; &#123;</span><br><span class="line">    <span class="attribute">border</span>-#&#123;<span class="variable">$attr</span>&#125;: <span class="number">#F00</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>常见函数的基本使用<br>这里介绍常见函数使用，更多函数移步官网</li></ol><p>Color(颜色函数)<br>sass包含很多操作颜色的函数。例如：lighten() 与 darken()函数可用于调亮或调暗颜色，opacify()函数使颜色透明度减少，transparent()函数使颜色透明度增加，mix()函数可用来混合两种颜色。</p><p>String(字符串函数)<br>Sass有许多处理字符串的函数，比如向字符串添加引号的quote()、获取字符串长度的string-length()和将内容插入字符串给定位置的string-insert()。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    &amp;<span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">        <span class="attribute">content</span>: <span class="built_in">quote</span>(这是里面的内容);</span><br><span class="line">        <span class="attribute">content</span>: <span class="built_in">str-insert</span>(<span class="variable">$string</span>: <span class="string">&quot;abce&quot;</span>, <span class="variable">$insert</span>:<span class="string">&quot;d&quot;</span> , <span class="variable">$index</span>: <span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">unquote</span>(<span class="variable">$string</span>: <span class="string">&quot;#f00&quot;</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="built_in">str-length</span>(<span class="string">&quot;sass学习&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Math(数值函数)<br>数值函数处理数值计算，例如：percentage()将无单元的数值转换为百分比，round()将数字四舍五入为最接近的整数，min()和max()获取几个数字中的最小值或最大值，random()返回一个随机数。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="built_in">abs</span>(<span class="variable">$number</span>: -<span class="number">15</span>); <span class="comment">// 15</span></span><br><span class="line">    <span class="attribute">z-index</span>: <span class="built_in">ceil</span>(<span class="number">5.8</span>); <span class="comment">//6</span></span><br><span class="line">    <span class="attribute">z-index</span>: <span class="built_in">max</span>(<span class="number">5</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">3</span>); <span class="comment">//8</span></span><br><span class="line">    <span class="attribute">opacity</span>: <span class="built_in">random</span>(); <span class="comment">// 随机 0-1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>List<br>List函数操作List，length()返回列表长度，nth()返回列表中的特定项，join()将两个列表连接在一起，append()在列表末尾添加一个值。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="built_in">length</span>(<span class="number">12px</span>); <span class="comment">//1</span></span><br><span class="line">    <span class="attribute">z-index</span>: <span class="built_in">length</span>(<span class="number">12px</span> <span class="number">5px</span> <span class="number">8px</span>); <span class="comment">//3</span></span><br><span class="line">    <span class="attribute">z-index</span>: <span class="built_in">index</span>(a b c d, c); <span class="comment">//3</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="built_in">append</span>(<span class="number">10px</span> <span class="number">20px</span>, <span class="number">30px</span>); <span class="comment">// 10px 20px 30px</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">nth</span>(<span class="variable">$list</span>: red blue green, <span class="variable">$n</span>: <span class="number">2</span>); <span class="comment">// blue</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Map函数<br>Map函数操作Map，map-get()根据键值获取map中的对应值，map-merge()来将两个map合并成一个新的map，map-values()映射中的所有值。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$font-sizes</span>:(<span class="string">&quot;small&quot;</span>:<span class="number">12px</span>,<span class="string">&quot;normal&quot;</span>:<span class="number">18px</span>,<span class="string">&quot;large&quot;</span>:<span class="number">24px</span>);</span><br><span class="line"><span class="variable">$padding</span>:(top:<span class="number">10px</span>,right:<span class="number">20px</span>,bottom:<span class="number">10px</span>,left:<span class="number">30px</span>);</span><br><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="built_in">map-get</span>(<span class="variable">$map</span>: <span class="variable">$font-sizes</span>, <span class="variable">$key</span>: <span class="string">&quot;normal&quot;</span>); <span class="comment">// 18px</span></span><br><span class="line">    <span class="keyword">@if</span> map-has-key(<span class="variable">$padding</span>, <span class="string">&quot;right&quot;</span>)&#123;</span><br><span class="line">        <span class="attribute">padding-right</span>: <span class="built_in">map-get</span>(<span class="variable">$padding</span>, <span class="string">&quot;right&quot;</span>); <span class="comment">// 20px</span></span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">        <span class="comment">// &#x27;&quot;small&quot;, &quot;normal&quot;, &quot;large&quot; 10px, 20px, 10px, 30px&#x27;;</span></span><br><span class="line">        <span class="attribute">content</span>: <span class="built_in">map-keys</span>(<span class="variable">$font-sizes</span>) + <span class="string">&quot; &quot;</span>+ <span class="built_in">map-values</span>(<span class="variable">$padding</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>selector选择器函数<br>选择符相关函数可对CSS选择进行一些相应的操作，例如：selector-append()可以把一个选择符附加到另一个选择符，selector-unify()将两组选择器合成一个复合选择器。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.header</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">selector-append</span>(<span class="string">&quot;.a&quot;</span>,<span class="string">&quot;.b&quot;</span>,<span class="string">&quot;.c&quot;</span>) + <span class="string">&#x27;&#x27;</span>;  <span class="comment">// &quot;.a.b.c&quot;</span></span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">selector-unify</span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;.diasbled&quot;</span>) + <span class="string">&#x27;&#x27;</span>;  <span class="comment">// &quot;a.diasbled&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自检函数<br>自检相关函数，例如：feature-exists()检查当前Sass版本是否存在某个特性，variable-exists()检查当前作用域中是否存在某个变量，mixin-exists()检查某个mixin是否存在。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$color</span>:<span class="number">#F00</span>;</span><br><span class="line"><span class="keyword">@mixin</span> padding(<span class="variable">$left</span>:<span class="number">0</span>, <span class="variable">$top</span>:<span class="number">0</span>, <span class="variable">$right</span>:<span class="number">0</span>, <span class="variable">$bottom</span>:<span class="number">0</span>) &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="variable">$top</span> <span class="variable">$right</span> <span class="variable">$bottom</span> <span class="variable">$left</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="keyword">@if</span> variable-exists(<span class="attribute">color</span>) &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="variable">$color</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@else</span> &#123;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&quot;$color不存在&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@if</span> mixin-exists(padding) &#123;</span><br><span class="line">        <span class="keyword">@include</span> padding(<span class="variable">$left</span>: <span class="number">10px</span>, <span class="variable">$right</span>: <span class="number">10px</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="4"><li>流程控制指令@if、@for、@each、@while<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@if</span> 控制指令</span><br><span class="line"><span class="keyword">@if</span>()`函数允许您根据条件进行分支，并仅返回两种可能结果中的一种。</span><br><span class="line"> 语法方式同js的`if....else if ...else</span><br><span class="line"><span class="variable">$theme</span>:<span class="string">&quot;green&quot;</span>;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="keyword">@if</span> <span class="variable">$theme</span>==<span class="string">&quot;red&quot;</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@else</span> if <span class="variable">$theme</span>==<span class="string">&quot;blue&quot;</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: blue;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@else</span> if <span class="variable">$theme</span>==<span class="string">&quot;green&quot;</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: green;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@else</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: darkgray;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>@for指令<br>@for 指令可以在限制的范围内重复输出格式，每次按要求（变量的值）对输出结果做出变动。这个指令包含两种格式：@for $var from through ，或者 @for $var from to，区别在于 through 与 to 的含义：</li></ol><p>当使用through时，条件范围包含与的值。<br>而使用to 时条件范围只包含的值不包含的值。<br>另外，$var 可以是任何变量，比如 $i 和 必须是整数值。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@for</span> <span class="variable">$i</span> from <span class="number">1</span> to <span class="number">4</span> &#123;</span><br><span class="line">    <span class="selector-class">.p</span>#&#123;<span class="variable">$i</span>&#125; &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">10px</span> * <span class="variable">$i</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@for</span> <span class="variable">$i</span> from <span class="number">1</span> through <span class="number">3</span> &#123;</span><br><span class="line">    <span class="selector-class">.p</span>#&#123;<span class="variable">$i</span>&#125; &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">10px</span> * <span class="variable">$i</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@each</span>指令</span><br><span class="line">有这样一个例子，普通CSS写法</span><br><span class="line"></span><br><span class="line">p&#123;</span><br><span class="line">  <span class="attribute">display</span>:inline-block;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)&#123;</span><br><span class="line">  <span class="attribute">background</span>:red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)&#123;</span><br><span class="line">  <span class="attribute">background</span>:green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>)&#123;</span><br><span class="line">  <span class="attribute">background</span>:blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>)&#123;</span><br><span class="line">  <span class="attribute">background</span>:orange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">5</span>)&#123;</span><br><span class="line">  <span class="attribute">background</span>:pink;</span><br><span class="line">&#125;</span><br><span class="line">使用<span class="keyword">@each</span>指令改写，<span class="keyword">@each</span> 指令的格式是 <span class="variable">$var</span> in &lt;list&gt; , <span class="variable">$var</span> 可以是任何变量名，比如 <span class="variable">$length</span> 或者 <span class="variable">$name</span>，而&lt;list&gt;是一连串的值，也就是值列表。</span><br><span class="line"></span><br><span class="line">p&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">display</span>:inline-block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$color-list</span>:red green blue orange pink;</span><br><span class="line"><span class="keyword">@each</span> <span class="variable">$color</span> in <span class="variable">$color-list</span>&#123;</span><br><span class="line">  <span class="comment">/*使用index()获取当前颜色在列表的所属位置*/</span></span><br><span class="line">  <span class="variable">$index</span>:<span class="built_in">index</span>(<span class="variable">$color-list</span>,<span class="variable">$color</span>);</span><br><span class="line">  <span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(#&#123;$index&#125;)&#123;</span><br><span class="line">    <span class="attribute">background</span>:<span class="variable">$color</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@while</span> 指令</span><br><span class="line"><span class="keyword">@while</span> 指令重复输出格式直到表达式返回结果为 false。这样可以实现比 <span class="keyword">@for</span> 更复杂的循环。</span><br><span class="line">用sass实现bootstrap中css的这么一段代码:</span><br><span class="line"></span><br><span class="line">.col-sm-<span class="number">12</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-11</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">91.66666667%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-10</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">83.33333333%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-9</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">75%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-8</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">66.66666667%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-7</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">58.33333333%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-6</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-5</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">41.66666667%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-4</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">33.33333333%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-3</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">16.66666667%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.col-sm-1</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8.33333333%</span>;</span><br><span class="line">&#125;</span><br><span class="line">用<span class="keyword">@while</span>改写:</span><br><span class="line"></span><br><span class="line"><span class="variable">$column</span>:<span class="number">12</span>;</span><br><span class="line"><span class="keyword">@while</span> <span class="variable">$column</span> &gt; <span class="number">0</span> &#123;</span><br><span class="line">    <span class="selector-class">.col-sm-</span>#&#123;<span class="variable">$column</span>&#125;&#123;</span><br><span class="line">        <span class="comment">// width:$column / 12*100%;</span></span><br><span class="line">        <span class="comment">// width: calc($column / 12) * 100%;</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="built_in">unquote</span>(<span class="variable">$string</span>: <span class="variable">$column</span> / <span class="number">12</span> * <span class="number">100</span> + <span class="string">&#x27;%&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$column</span>:<span class="variable">$column</span> - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/blog/2023/11/03/hello-world/"/>
      <url>/blog/2023/11/03/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
